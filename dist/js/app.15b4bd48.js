(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},n={app:0},r=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/online-clip-editor/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"0e73":function(t,e,i){"use strict";i("87b9")},"10d8":function(t,e,i){t.exports=i.p+"media/sunsetGlow.4a030f24.mp4"},"12af":function(t,e,i){t.exports=i.p+"img/snow.ad7436f8.jpg"},"17aa":function(t,e,i){},"1e6d":function(t,e,i){t.exports=i.p+"img/line.a3194c1b.jpg"},"2bb4":function(t,e,i){t.exports=i.p+"media/line.7080c3ba.webm"},"32c2":function(t,e,i){},3394:function(t,e,i){},3856:function(t,e,i){},"39fa":function(t,e,i){"use strict";i("17aa")},4102:function(t,e,i){"use strict";i("ea0a")},"43f9":function(t,e,i){t.exports=i.p+"img/material1004.e7886882.png"},"44fc":function(t,e,i){"use strict";i("c513")},4671:function(t,e,i){},"4c4f":function(t,e,i){},"4e3e":function(t,e,i){"use strict";i("7aa1")},"4e74":function(t,e,i){},"50b5":function(t,e,i){t.exports=i.p+"media/circle.e91e0343.webm"},"52c4":function(t,e,i){"use strict";i("53f0")},"53f0":function(t,e,i){},"554c":function(t,e,i){"use strict";i("ca6b")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("OnlineClip")],1)},r=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isClipLoading,expression:"isClipLoading"}],staticClass:"online-clip",attrs:{"element-loading-text":"努力加载中...","element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-custom-class":"loading-style",id:"onlineClip"}},[i("el-row",{staticClass:"main-area"},[i("el-col",{ref:"tabsCol",staticClass:"material-cols",attrs:{span:15,id:"materialArea"}},[i("el-row",{staticClass:"material-area"},[i("el-tabs",{staticClass:"online-clip-tabs",model:{value:t.onlineTab,callback:function(e){t.onlineTab=e},expression:"onlineTab"}},[i("el-tab-pane",{attrs:{name:"materialTab"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-folder-opened"}),t._v(" 已选素材")]),"materialTab"===t.onlineTab?i("MaterialTab",{ref:"materialTab",attrs:{id:"materialItem"},on:{"update-date":t.updatePointerData,"video-data":t.handleVideoDataSet,"video-cover":t.drawCanvasVideoCover,"selected-click":t.handleSelectedClick,"show-material-dialog":t.handleShowMaterialDialog}}):t._e()],1),i("el-tab-pane",{attrs:{name:"pictureTab"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-picture-outline"}),t._v(" 贴图")]),"pictureTab"===t.onlineTab?i("PictureTab",{ref:"pictureTab",attrs:{"tab-name":t.onlineTab},on:{"icon-add":t.handleIconAdd}}):t._e()],1),i("el-tab-pane",{attrs:{name:"textTab"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("span",{staticClass:"diy-icon-t"},[t._v("T")]),t._v(" 字幕 ")]),"textTab"===t.onlineTab?i("TextTab",{attrs:{"is-edit":t.isTextEdit},on:{"icon-add":t.handleIconAdd,"stop-edit":t.handleCancelEdit}}):t._e()],1),i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-guide"}),t._v(" 转场")]),i("TempMessage")],1),i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-service"}),t._v(" 配乐")]),i("TempMessage")],1),i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-magic-stick"}),t._v(" 滤镜")]),i("TempMessage")],1)],1)],1)],1),i("el-col",{ref:"videoCols",staticClass:"video-cols",attrs:{span:9}},[i("div",{staticClass:"info-icon-area"},[i("el-tooltip",{attrs:{content:"* 视频长度以视频轨道长度为准。",placement:"bottom"}},[i("i",{staticClass:"el-icon-info"})]),i("el-tooltip",{attrs:{content:"点击显示引导",placement:"bottom"}},[i("i",{staticClass:"el-icon-place",on:{click:t.startGuider}})])],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoadingVideo,expression:"isLoadingVideo"}],ref:"videoFrame",staticClass:"video-frame",attrs:{id:"videoArea"}},[i("video",{ref:"video",staticStyle:{display:"none"},attrs:{id:"video",preload:"auto",crossOrigin:"*",src:t.videoSrc}}),i("canvas",{ref:"canvasVideo",staticClass:"canvas-video",attrs:{id:"canvasVideo"}}),t._l(t.reversePictureList,(function(e,a){return i("PictureDrr",{key:"pictureDrr"+t.getReverseIndex(a,t.reversePictureList.length),ref:"pictureDrr",refInFor:!0,attrs:{"track-index":t.getReverseIndex(a,t.reversePictureList.length),"track-list":e,"key-code":t.keyCode,"video-play":t.videoPlay,"is-text-edit":t.isTextEdit},on:{"video-pause":t.handleVideoPause,"stop-edit":t.handleCancelEdit}})})),t._l(t.reverseTextList,(function(e,a){return i("TextDrr",{key:"textDrr"+t.getReverseIndex(a,t.reverseTextList.length),ref:"textDrr",refInFor:!0,attrs:{id:"textDrr"+t.getReverseIndex(a,t.reverseTextList.length),"track-index":t.getReverseIndex(a,t.reverseTextList.length),"track-list":e,"key-code":t.keyCode,"video-play":t.videoPlay,"is-text-edit":t.isTextEdit},on:{"text-edit":t.handleTextEdidState,"video-pause":t.handleVideoPause,"stop-edit":t.handleCancelEdit}})}))],2),i("div",{staticClass:"video-controls"},[i("div",{staticClass:"controls-icons"},[t.videoPlay?t._e():i("el-image",{staticClass:"controls-play",attrs:{src:t.controlsIcons.play},on:{click:t.handleVideoPlay}}),t.videoPlay?i("el-image",{staticClass:"controls-pause",attrs:{src:t.controlsIcons.pause},on:{click:t.handleVideoPause}}):t._e()],1),i("div",{staticClass:"controls-duration"},[t._v(" "+t._s(t.trackCurrentTime)+" / "+t._s(t.trackDurationString)+" ")])])])],1),i("el-row",{staticClass:"operations-area",attrs:{id:"buttonArea"}},[i("div",{staticClass:"operations-convenient"},[i("i",{class:{"el-icon-delete":!0,"custom-i-hover":!t.selected.type},attrs:{id:"deleteIcon"},on:{click:function(e){return t.keyUpMonitor({keyCode:46})}}}),i("i",{class:{"el-icon-scissors":!0,"custom-i-hover":0===t.materialTrackList.length||t.banClip||t.videoPlay},attrs:{id:"clipIcon"},on:{click:t.handleMediaClip}})]),i("div",{staticClass:"operations-save",attrs:{id:"submitButton"}},[i("el-button",{staticClass:"save-my-works",on:{click:function(e){return t.handleSaveOrSubmit(0)}}},[t._v("保存至我的作品")]),i("el-button",{staticClass:"save-clip",on:{click:function(e){return t.handleSaveOrSubmit(1)}}},[t._v("提交剪辑")])],1)]),i("el-row",{staticClass:"axis-area",attrs:{id:"tracksArea"}},[i("el-col",{ref:"clipResourceIcons",staticClass:"clip-resource-icons",attrs:{span:1}},[i("div",{ref:"emptyIcon",staticClass:"empty-icon"}),i("div",{attrs:{id:"multiTracksItem"}},t._l(t.textTrackList,(function(e,a){return i("div",{key:a,on:{mouseover:function(e){return t.handleIconHover(a,"文字","text")},mouseout:function(e){t.isShowUl=!1}}},[i("span",{staticClass:"track-type-icon",style:{color:t.showUlIndex===a&&"text"===t.ulName&&t.isShowUl?"#26CB51":"#606266"}},[t._v(" T ")])])})),0),i("i",{staticClass:"el-icon-picture-outline track-type-icon"}),i("i",{staticClass:"el-icon-video-camera track-type-icon"}),i("i",{staticClass:"el-icon-service track-type-icon"}),i("MultiTracksUl",{directives:[{name:"show",rawName:"v-show",value:t.isShowUl,expression:"isShowUl"}],staticClass:"multi-tracks-ul",style:{top:t.getUlTop()+15+"px",left:t.iconWidth+"px"},attrs:{index:t.showUlIndex,"icon-width":t.iconWidth,text:t.ulText,name:t.ulName},nativeOn:{mouseover:function(e){t.isShowUl=!0},mouseout:function(e){t.isShowUl=!1}}})],1),i("el-col",{ref:"clipResource",staticClass:"clip-resource",attrs:{span:23}},[i("Pointer",{ref:"pointer",staticClass:"pointer-style",attrs:{"video-play":t.videoPlay,"width-range":t.trackDuration*t.trackScale},on:{"pause-video":t.handleVideoPause,"set-pointer-track":t.setPointerAndTrack,"current-material":t.judgeVideoSource,"current-picture":t.judgePictureSource,"current-text":t.judgeTextSource,"current-transition":t.judgeTransitionSource}}),i("el-row",{ref:"timeAxis",staticClass:"time-axis"},[i("TimeAxis",{attrs:{"material-duration":t.trackDuration},on:{"move-by-axis":t.changePointerStart}})],1),t._l(t.textTrackList,(function(e,a){return i("el-row",{key:"textTrack"+a,style:{width:t.timeAxisDuration*t.trackScale+500>6e3?t.timeAxisDuration*t.trackScale+500+"px":"6000px"}},[i("TextTrack",{ref:"textTrack",refInFor:!0,attrs:{"track-index":a,"track-list":e},on:{"click-text":t.handleTrackClick,"mousedown-text":t.handleTrackMouseDown}})],1)})),t._l(t.pictureTrackList,(function(e,a){return i("el-row",{key:"pictureTrack"+a,style:{width:t.timeAxisDuration*t.trackScale+500>6e3?t.timeAxisDuration*t.trackScale+500+"px":"6000px"}},[i("PictureTrack",{ref:"pictureTrack",refInFor:!0,attrs:{"track-list":e},on:{"click-picture":t.handleTrackClick,"mousedown-picture":t.handleTrackMouseDown}})],1)})),i("el-row",{staticClass:"video-track",style:{width:t.timeAxisDuration*t.trackScale+500>6e3?t.timeAxisDuration*t.trackScale+500+"px":"6000px"},attrs:{id:"video-track"}},[i("MaterialTrack",{attrs:{"video-play":t.videoPlay},on:{"selected-click":t.handleSelectedClick,"video-pause":t.handleVideoPause}}),i("TransitionTrack",{ref:"transitionTrack",attrs:{"is-save-or-submit":t.isSaveOrSubmit}})],1),i("el-row",{style:{width:t.timeAxisDuration*t.trackScale+500>6e3?t.timeAxisDuration*t.trackScale+500+"px":"6000px"}})],2)],1),t.isShowMaterialAdd?i("el-dialog",{staticClass:"add-material-dialog",attrs:{title:"添加素材",width:"95%",visible:t.isShowMaterialAdd,"append-to-body":!0,"modal-append-to-body":!0},on:{"update:visible":function(e){t.isShowMaterialAdd=e}}},[i("TempMessage")],1):t._e(),t.isSaveOrSubmit?i("SubmitClip",{attrs:{"is-save-or-submit":t.isSaveOrSubmit,"save-or-submit":t.saveOrSubmit,"form-info":t.videoInfo,"video-frame":t.videoFrame},on:{"submit-close":t.handleSubmitClose,"all-close":t.handleAllClose}}):t._e()],1)},o=[],c=i("5530"),l=(i("99af"),i("fb6a"),i("13d5"),i("7db0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas-container"},[i("canvas",{directives:[{name:"drag",rawName:"v-drag"}],ref:"timeAxis",staticClass:"time-canvas",style:{width:t.axisWidth+"px"}})])}),d=[];i("a9e3"),i("ac1f"),i("1276"),i("5319"),i("d3b7"),i("25f0");function u(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),a=Math.floor(t%60),n=e<10?"0"+e:e,r=i<10?"0"+i:i,s=a<10?"0"+a:a;return n+":"+r+":"+s}function h(t){var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),i="#",a=65536*Number(e[0])+256*Number(e[1])+Number(e[2]),n=a.toString(16);return n.length<6&&(n="0"+n),i+=n,i.length<6&&(i="#000000"),i.toUpperCase()}var m,p,g=i("2f62"),f={props:{materialDuration:{type:Number,default:0}},directives:{drag:function(t,e,i){var a=t;a.onmousedown=function(t){if(0===i.context.duration)return!1;var e=t.offsetX,a=t.clientX-e;i.context.changePointer(e),document.onmousemove=function(t){t.preventDefault();var e=t.clientX-a;i.context.changePointer(e)},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}},data:function(){return{axis:void 0,axisCtx:void 0,axisWidth:6e3,height:25,that:this}},computed:Object(c["a"])({},Object(g["c"])({timeAxisDuration:function(t){return t.timeAxisDuration},trackScale:function(t){return t.trackScale}})),watch:{timeAxisDuration:{handler:function(){this.getWidth()},deep:!0}},methods:{getWidth:function(){var t=this.timeAxisDuration*this.trackScale+500;this.axisWidth=t>6e3?t:6e3,this.drawAxis()},drawAxis:function(){var t=this.trackScale,e=this.height/2,i=this.height,a=this.axisWidth,n=this.trackScale,r=this.axis,s=this.axisCtx,o=1;r.width=this.axisWidth,r.height=this.height,s.strokeStyle="#999",s.fillStyle="#999",s.font="12px Source Han Sans CN",s.lineWidth=.2,s.beginPath(),s.moveTo(0,e),s.lineTo(0,i),s.fillText("00:00:00",-18,10),s.closePath(),s.stroke(),s.translate(.5,.5);while(a>=o){if(s.beginPath(),o%n===0){s.moveTo(o*t+1,e),s.lineTo(o*t+1,i);var c=u(o);s.fillText(c,o*t-23,10)}else s.moveTo(o*t+1,3*i/4),s.lineTo(o*t+1,i);s.closePath(),s.stroke(),o++}},changePointer:function(t){var e=t/this.trackScale;e<0&&(e=0),e>this.materialDuration&&(e=this.materialDuration),this.$emit("move-by-axis",e)}},mounted:function(){this.axis=this.$refs.timeAxis,this.axisCtx=this.$refs.timeAxis.getContext("2d"),this.drawAxis()}},v=f,T=(i("ef79"),i("2877")),x=Object(T["a"])(v,l,d,!1,null,"65357a21",null),k=x.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"pointer"},[t._m(0),i("div",{staticClass:"line",style:{zIndex:t.isDragging?0:1}})])])},b=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"head"},[i("i",{staticClass:"iconfont icon-biaoqian3"})])}],A=(i("159b"),i("b0c0"),i("c740"),100),I=30,S=10,w={},C=null,L=null,D=!1,P=!1,E=[],N={},F={},M={},O=null,B=null,V=null,$=[],U={defaultPicWidth:A,defaultPicHeight:I,trackScale:S,dragTarget:w,dragTranslateX:C,dragWidth:L,isDropZone:D,isDragFromTab:P,pictureList:E,mouseElement:N,picturePosition:F,playingPicture:M,playingPictureIndex:O,direction:B,iconWidth:V,transitionList:$},R=U,z=Object(T["a"])(R,m,p,!1,null,null,null),j=z.exports,X={props:{videoPlay:{type:Boolean,default:!1},widthRange:{type:Number,default:0}},directives:{drag:function(t,e,i){var a=t,n=i.context.translateX,r=i.context.trackScale;a.onmousedown=function(t){var e=i.context.widthRange,s=t.clientX-n;document.onmousemove=function(t){t.preventDefault();var o=i.context.videoPlay;if(!e)return!1;o&&i.context.that.$emit("pause-video");var c=t.clientX-s;c<0&&(c=0),c>e&&(c=e-1),i.context.translateX=c,a.style.transform="translate(".concat(i.context.translateX,"px, ").concat(i.context.translateY,"px)"),i.context.judgePlayingTarget();var l=n/r;i.context.that.$emit("set-pointer-track",n,l)},document.onmouseup=function(){if(document.onmousemove=null,document.onmouseup=null,!e)return!1;i.context.judgePlayingTarget();var t=n/r;i.context.that.$emit("set-pointer-track",n,t)}}}},data:function(){return{that:this,pointer:void 0,transitionList:j.transitionList,tracks:[{name:"material",list:"materialTrackList"},{name:"picture",list:"pictureTrackList"},{name:"text",list:"textTrackList"},{name:"transition",list:"transitionList"}],translateY:11,translateX:0}},computed:Object(c["a"])({},Object(g["c"])({materialTrackList:function(t){return t.materialTrackList},pictureTrackList:function(t){return t.pictureTrackList},textTrackList:function(t){return t.textTrackList},needPointerJudge:function(t){return t.needPointerJudge},trackScale:function(t){return t.trackScale},isDragging:function(t){return t.isDragging}})),watch:{"needPointerJudge.isNeed":function(t){if(t){var e=this.needPointerJudge.target,i=e.indexOf("TrackList"),a=e.slice(0,i),n={list:e,name:a};this.judgePlaying(n),this.$store.commit("isNeedPointerJudging")}}},methods:{handlePointerYStatic:function(t){this.translateY=t+11,this.pointer.style.transform="translate(".concat(this.translateX,"px, ").concat(this.translateY,"px)")},moveWhenVideoPlay:function(t){var e=t*this.trackScale;this.translateX=e,this.pointer.style.transform="translate(".concat(this.translateX,"px, ").concat(this.translateY,"px)")},judgePlayingTarget:function(){var t=this;this.tracks.forEach((function(e){t.judgePlaying(e)}))},judgePlaying:function(t){var e=this,i=this.pointer.offsetLeft,a=t.list,n=t.name;"transitionList"===a&&(this[a]=j.transitionList);var r=null,s=this[a].length;if(!s)return!1;if("materialTrackList"===a||"transitionList"===a){r=this[a].findIndex((function(t){var a=i/e.trackScale;return t.trackStartTime<=a&&t.trackEndTime>a}));var o=-1===r?void 0:this[a][r];return this.$emit("current-"+n,o,r),!0}for(var c=[],l=[],d=0;d<s;d++){r=this[a][d].findIndex((function(t){var a=i/e.trackScale;return t.trackStartTime<=a&&t.trackEndTime>a}));var u=-1===r?void 0:this[a][d][r];c.push(u),l.push(r)}this.$emit("current-"+n,c,l)},changePointerLeft:function(t){t<1&&(t=1),t>this.widthRange&&(t=this.widthRange),this.translateX=t-1,this.pointer.style.transform="translate(".concat(this.translateX,"px, ").concat(this.translateY,"px)")}},mounted:function(){this.pointer=document.querySelector(".pointer")}},W=X,Q=(i("0e73"),Object(T["a"])(W,y,b,!1,null,"54600f8c",null)),Y=Q.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"submit-dialog"},[i("el-dialog",{attrs:{width:"1200px","append-to-body":"",title:t.dialogTitle,"close-on-click-modal":!1,visible:t.isSaveOrSubmit,"before-close":t.handleDialogClose},on:{"update:visible":function(e){t.isSaveOrSubmit=e}}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{staticClass:"submit-video-container",attrs:{span:14}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isVideoLoading,expression:"isVideoLoading"}],staticClass:"video-frame",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)"}},[i("video",{ref:"submitVideo",staticClass:"submit-video",staticStyle:{display:"none"},attrs:{preload:"auto",crossOrigin:"*",src:t.videoSrc},on:{timeupdate:t.handleVideoPlaying,play:t.drawCanvasVideo,pause:t.stopCanvasVideo,seeking:function(e){t.isVideoLoading=!0},seeked:t.drawCanvasCover}}),i("canvas",{ref:"canvasVideo",staticClass:"canvas-video",attrs:{id:"canvasVideo"}})]),t._l(t.reversePictureList,(function(e,a){return i("PictureDrr",{key:"pictureDrr"+t.getReverseIndex(a,t.reversePictureList.length),ref:"pictureDrr",refInFor:!0,staticClass:"resizable-container",attrs:{"track-index":t.getReverseIndex(a,t.reversePictureList.length),"track-list":e,"is-submit":!0,scale:{width:t.widthScale,height:t.heightScale},"submit-playing":t.playingPicture,"submit-playing-index":t.playingPictureIndex}})})),t._l(t.reverseTextList,(function(e,a){return i("TextDrr",{key:"textDrr"+t.getReverseIndex(a,t.reverseTextList.length),ref:"textDrr",refInFor:!0,staticClass:"resizable-container",attrs:{id:"textDrr"+t.getReverseIndex(a,t.reverseTextList.length),"track-index":a,"track-list":e,"is-submit":!0,scale:{width:t.widthScale,height:t.heightScale},"submit-playing":t.playingText,"submit-playing-index":t.playingTextIndex}})})),i("VideoControls",{attrs:{"video-play":t.videoPlay,"track-duration":t.trackDuration,"track-current-time":t.trackCurrentTime},on:{"video-play":t.handleVideoPlay,"video-pause":t.handleVideoPause,"slider-change":t.handleSliderChange}})],2),i("el-col",{attrs:{span:10}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoadingSelect,expression:"isLoadingSelect"}],ref:"videoInfo",attrs:{model:t.videoInfo,rules:1===t.saveOrSubmit?t.submitRules:t.saveRules}},[i("el-form-item",{staticClass:"input-inner works-title",attrs:{label:"作品名称：",prop:"videoTitle"}},[i("el-input",{model:{value:t.videoInfo.videoTitle,callback:function(e){t.$set(t.videoInfo,"videoTitle",e)},expression:"videoInfo.videoTitle"}})],1),i("el-form-item",{attrs:{label:"业务分类：",prop:"businessType"}},[i("el-select",{on:{change:t.handleBusinessTypeChange},model:{value:t.videoInfo.businessType,callback:function(e){t.$set(t.videoInfo,"businessType",e)},expression:"videoInfo.businessType"}},t._l(t.businessTypeList,(function(t){return i("el-option",{key:1*t.tagEnName,attrs:{label:t.tagCnName,value:1*t.tagEnName}})})),1)],1),i("el-form-item",{attrs:{label:"内容分类：",prop:"categoryId"}},[i("el-select",{on:{change:t.handleCategorySelelct},model:{value:t.videoInfo.categoryId,callback:function(e){t.$set(t.videoInfo,"categoryId",e)},expression:"videoInfo.categoryId"}},t._l(t.realCategoryTypeList,(function(t){return i("el-option",{key:1*t.tagEnName,attrs:{label:t.tagCnName,value:1*t.tagEnName}})})),1)],1),i("el-form-item",{attrs:{label:"作品类型：",prop:"productType"}},[i("el-select",{model:{value:t.videoInfo.productType,callback:function(e){t.$set(t.videoInfo,"productType",e)},expression:"videoInfo.productType"}},t._l(t.productTypeList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"标签：",prop:"tag"}},[i("el-button",{staticClass:"auto-tag-button",attrs:{type:"primary"},on:{click:t.getAdviceTag}},[t._v("自动标签")]),i("span",{staticClass:"message"},[t._v("系统智能标签获取")]),i("div",{staticClass:"tags-container"},t._l(t.videoInfo.tag,(function(e,a){return i("span",{key:e+a,staticClass:"dialog-tag"},[t._v(" "+t._s(e)+" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){return t.handleTagDelete(a)}}})])})),0),i("el-input",{staticClass:"input-inner tag-input",attrs:{placeholder:"输入标签按回车确认"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleAddTag(e)}},model:{value:t.addTagName,callback:function(e){t.addTagName=e},expression:"addTagName"}})],1),i("el-form-item",{attrs:{label:"封面："}},[i("div",{staticClass:"cover-source"},[i("span",{staticClass:"cover-by-canvas",on:{click:t.getCoverByVideo}},[i("i",{staticClass:"el-icon-upload2"}),i("el-tooltip",{attrs:{placement:"top",content:"拖动左侧进度条以获取指定封面图"}},[i("span",[t._v(" 获取封面")])])],1),i("span",{staticClass:"message"},[t._v(" 横图竖图同时获取")])]),i("el-form-item",{staticClass:"pic-style",attrs:{prop:"picH"}},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPicH,expression:"loadingPicH"}],ref:"picHUploader",staticClass:"avatar-uploader horizontal-cover-uploader",attrs:{accept:"image/*","list-type":"picture","auto-upload":"",multiple:!1,action:t.mediaImageUploadUrl,"on-change":t.handleUploadChange,"on-success":function(e){return t.handleUploadSuccess(0,e)},"before-upload":function(e){return t.handleUploadBefore(0,e)}}},[t.videoInfo.picH?i("el-image",{staticClass:"horizontal-cover",attrs:{src:t.videoInfo.picH}}):i("i",{staticClass:"el-icon-plus horizontal-cover-icon"})],1)],1),i("el-form-item",{staticClass:"pic-style picV-style",attrs:{prop:"picV"}},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPicV,expression:"loadingPicV"}],ref:"picVUploader",staticClass:"avatar-uploader vertical-cover-uploader",attrs:{accept:"image/*","list-type":"picture",name:"picV","auto-upload":"",multiple:!1,action:t.mediaImageUploadUrl,"on-change":t.handleUploadChange,"on-success":function(e){return t.handleUploadSuccess(1,e)},"before-upload":function(e){return t.handleUploadBefore(1,e)}}},[t.videoInfo.picV?i("el-image",{staticClass:"vertical-cover",attrs:{src:t.videoInfo.picV}}):i("i",{staticClass:"el-icon-plus vertical-cover-icon"})],1)],1),i("div",{staticClass:"cover-message"},[i("span",{staticClass:"message"},[t._v("标准尺寸 横图:750*422 竖图:266*366")])])],1),i("el-form-item",{attrs:{label:"输出设置：",prop:"define"}},[i("el-radio-group",{model:{value:t.videoInfo.define,callback:function(e){t.$set(t.videoInfo,"define",e)},expression:"videoInfo.define"}},[i("el-radio-button",{attrs:{label:"1080P"}}),i("el-radio-button",{attrs:{label:"720P"}}),i("el-radio-button",{attrs:{label:"480P"}})],1)],1)],1),i("div",{staticClass:"submit-button-group"},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingSave,expression:"loadingSave"}],attrs:{type:"primary"},on:{click:t.handleSubmitValid}},[t._v(t._s(t.buttonText))]),i("el-button",{attrs:{type:"info"},on:{click:t.handleDialogClose}},[t._v("取消")])],1)],1)],1)],1)],1)},J=[],H=(i("a434"),i("3ca3"),i("ddb0"),i("466d"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.trackList,(function(e,a){return i("div",{key:e.id+""+a,staticClass:"resizable-container"},[t.handleShow(a)?i("DraggableResizable",{ref:"resizable",refInFor:!0,staticClass:"resizable-style",attrs:{"class-name-handle":"resizable-handle",w:t.isSubmit?e.width*t.scale.width:e.width,h:t.isSubmit?e.height*t.scale.height:e.height,angle:e.whirl,x:t.isSubmit?e.nowXAxis*t.scale.width:e.nowXAxis,y:t.isSubmit?e.nowYAxis*t.scale.height:e.nowYAxis,minw:1,minh:1,handles:16===t.keyCode?["nw","ne","sw","se"]:["n","s","e","w","nw","ne","sw","se"],active:!t.isSubmit&&"picture"===t.activeName&&t.selected.trackIndex===t.trackIndex&&t.selected.index===a,rotatable:!t.isSubmit,draggable:!t.isSubmit,resizable:!t.isSubmit},on:{rotating:t.handleRotating,resizing:t.handleResizing,dragging:t.handleDragging,activated:function(e){return t.handleActive(a)},dragstop:t.handleDragStop,resizestop:t.handleResizeStop}},["video"===e.fileType?i("video",{ref:"drrTarget",refInFor:!0,staticClass:"picture-video",attrs:{crossOrigin:"*",muted:"",src:e.fileUrl},domProps:{muted:!0},on:{mousedown:function(e){return t.handleResizeClick(a)}}}):t._e(),"video"!==e.fileType?i("el-image",{ref:"drrTarget",refInFor:!0,staticClass:"picture-image",attrs:{src:e.fileUrl},on:{mousedown:function(e){return t.handleResizeClick(a)}}}):t._e()],1):t._e()],1)})),0)}),q=[],G=i("c1c3"),K=i.n(G),Z={components:{DraggableResizable:K.a},props:{keyCode:{type:Number,default:null},trackIndex:{type:Number,default:0},videoPlay:{type:Boolean,default:!1},isTextEdit:{type:Boolean,default:!1},isSubmit:{type:Boolean,default:!1},trackList:{type:Array,default:function(){}},submitPlaying:{type:Array,default:function(){}},submitPlayingIndex:{type:Array,default:function(){}},scale:{type:Object,default:function(){}}},computed:Object(c["a"])({},Object(g["c"])({playingPicture:function(t){return t.playingPicture},playingPictureIndex:function(t){return t.playingPictureIndex},activeName:function(t){return t.activeName},selected:function(t){return t.selected},dragPlayingName:function(t){return t.dragPlayingName},storeTrackIndex:function(t){return t.trackIndex}})),watch:{playingPictureIndex:function(t){var e=this;-1===t||this.isSubmit||this.$nextTick((function(){var t=e.$refs.drrTarget?e.$refs.drrTarget[0]:null;if(!t)return!1;var i=t.$el?t.$el.style:t.style;i.opacity=e.playingPicture[e.trackIndex].transparency,i.transform=e.playingPicture[e.trackIndex].transform?e.playingPicture[e.trackIndex].transform:""}))}},methods:{handleShow:function(t){if(this.isSubmit)return this.submitPlayingIndex[this.trackIndex]===t;var e="pixture"!==this.dragPlayingName||"pixture"===this.dragPlayingName&&this.storeTrackIndex!==this.trackIndex;return e&&this.playingPictureIndex[this.trackIndex]===t},handleRotating:function(t){this.videoPlay&&this.$emit("video-pause"),this.$store.commit("drrRotating",t)},handleResizing:function(t,e,i,a){this.videoPlay&&this.$emit("video-pause");var n={left:t,top:e,width:i,height:a};this.$store.commit("drrResizing",{keyCode:this.keyCode,rect:n,playingName:"playingPicture",vm:this})},handleDragging:function(){this.videoPlay&&this.$emit("video-pause")},handleActive:function(t,e){if(this.isSubmit)return!1;this.isTextEdit&&this.$emit("stop-edit",this.selected.trackIndex),this.$store.commit("drrActive",{activeTarget:"picture",list:"pictureTrackList",playingName:"playingPicture",vm:this});var i=document.querySelector("#pictureTrack"+this.trackIndex).querySelector("#picture"+t);e||this.$store.commit("trackBlockSelect",{e:i,index:t,trackIndex:this.trackIndex,list:"pictureTrackList"})},handleDragStop:function(t,e){this.$store.commit("drrDragStop",{left:t,top:e,playingName:"playingPicture",vm:this})},handleResizeStop:function(t,e,i,a){this.$store.commit("drrResizeStop",{left:t,top:e,width:i,height:a})},handleResizeClick:function(){}}},tt=Z,et=(i("f285"),Object(T["a"])(tt,H,q,!1,null,"20409c3b",null)),it=et.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isEdit,expression:"isEdit"}],ref:"drrInput",staticClass:"drr-input",on:{mousedown:t.handleDrrHandler}},[i("el-input",{ref:"input",staticClass:"input-style",attrs:{type:"textarea",resize:"none"},on:{blur:t.handleDrrTextEditBlur},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleDrrTextEditEnd(e)}},model:{value:t.editText,callback:function(e){t.editText=e},expression:"editText"}})],1),t._l(t.trackList,(function(e,a){return i("div",{key:e.id+""+a,staticClass:"resizable-container"},[i("div",{staticClass:"draggable-container",style:{transform:t.isSubmit?"scale("+640/t.originalWidth+")":"scale("+t.proportion+")"}},[t.handleShow(a)?i("DraggableResizable",{ref:"resizable",refInFor:!0,staticClass:"resizable-style",attrs:{"class-name-handle":"resizable-handle",w:e.width,h:e.height,angle:e.whirl,x:e.nowXAxis,y:e.nowYAxis,minw:1,minh:1,handles:16===t.keyCode?["nw","ne","sw","se"]:["n","s","e","w","nw","ne","sw","se"],active:!t.isSubmit&&"text"===t.activeName&&t.selected.trackIndex===t.trackIndex&&t.selected.index===a,rotatable:!t.isSubmit,draggable:!t.isSubmit,resizable:!t.isSubmit},on:{rotating:t.handleRotating,resizing:t.handleResizing,dragging:t.handleDragging,activated:function(e){return t.handleActive(a)},dragstop:t.handleDragStop,resizestop:t.handleResizeStop},nativeOn:{dblclick:function(i){return t.handleDrrTextEdit(e,a)}}},[t.isEdit?t._e():i("div",{staticClass:"drr-target-container"},[i("span",{ref:"drrTarget",refInFor:!0,staticClass:"drr-target",style:{fontFamily:e.fontFile,fontSize:e.fontSize+"px",color:e.fontColor,fontWeight:e.bold?e.fontWeight:400,fontStyle:e.italic?e.fontStyle:"normal",letterSpacing:e.wordSpacing+"px",lineHeight:e.lineSpacing,border:e.frame?e.border:"none",textAlign:e.alignment,textShadow:e.shadowY?e.textShadow:"none",textDecoration:e.underLine?e.textDecoration:"none",opacity:e.transparency,webkitTextStroke:e.borderW?e.webkitTextStroke:"0px"}},[t._v(t._s(e.text))])])]):t._e()],1)])}))],2)},nt=[],rt={components:{DraggableResizable:K.a},props:{keyCode:{type:Number,default:null},trackIndex:{type:Number,default:0},videoPlay:{type:Boolean,default:!1},isTextEdit:{type:Boolean,default:!1},isSubmit:{type:Boolean,default:!1},trackList:{type:Array,default:function(){}},submitPlaying:{type:Array,default:function(){}},submitPlayingIndex:{type:Array,default:function(){}},scale:{type:Object,default:function(){}}},data:function(){return{editText:"",isEdit:!1,isDivRange:!1}},computed:Object(c["a"])({},Object(g["c"])({storeTrackIndex:function(t){return t.trackIndex},proportion:function(t){return t.proportion},originalWidth:function(t){return t.originalWidth},activeName:function(t){return t.activeName},dragPlayingName:function(t){return t.dragPlayingName},selected:function(t){return t.selected},playingText:function(t){return t.playingText},playingTextIndex:function(t){return t.playingTextIndex}})),watch:{videoPlay:function(t){t&&this.isEdit&&this.handleDrrTextEditEnd()}},methods:{handleShow:function(t){if(this.isSubmit)return this.submitPlayingIndex[this.trackIndex]===t;var e="text"!==this.dragPlayingName||"text"===this.dragPlayingName&&this.storeTrackIndex!==this.trackIndex;return e&&this.playingTextIndex[this.trackIndex]===t},handleRotating:function(t){this.videoPlay&&this.$emit("video-pause"),this.isEdit&&this.handleDrrTextEditEnd(),this.$store.commit("drrRotating",t)},handleResizing:function(t,e,i,a){this.videoPlay&&this.$emit("video-pause"),this.isEdit&&this.handleDrrTextEditEnd();var n={left:t,top:e,width:i,height:a};this.$store.commit("drrResizing",{keyCode:this.keyCode,rect:n,playingName:"playingText",vm:this})},handleDragging:function(){this.videoPlay&&this.$emit("video-pause")},handleActive:function(t,e){if(this.isSubmit)return!1;this.isTextEdit&&this.$emit("stop-edit",this.selected.trackIndex),this.$store.commit("drrActive",{activeTarget:"text",list:"textTrackList",playingName:"playingText",vm:this});var i=document.querySelector("#textTrack"+this.trackIndex).querySelector("#text"+t);e||this.$store.commit("trackBlockSelect",{e:i,index:t,trackIndex:this.trackIndex,list:"textTrackList"})},handleDragStop:function(t,e){this.$store.commit("drrDragStop",{left:t,top:e,playingName:"playingText",vm:this})},handleResizeStop:function(t,e,i,a){this.$store.commit("drrResizeStop",{left:t,top:e,width:i,height:a})},handleDrrHandler:function(){if(!this.isEdit||this.isSubmit)return!1;this.isDivRange=!0,this.$store.commit("drrActive",{activeTarget:"text",list:"textTrackList",playingName:"playingText",vm:this})},handleDrrTextEdit:function(t,e){var i=this;if(this.isSubmit)return!1;this.isEdit=!0,this.$store.commit("updateNumberOrString",{name:"textEditIndex",value:e}),this.editText=t.text,this.$refs.drrInput.style="\n        width: ".concat(t.width,"px;\n        heigth: ").concat(t.height,"px;\n        transform: translate(").concat(t.nowXAxis,"px, ").concat(t.nowYAxis,"px)\n      "),this.$refs.input.$el.firstChild.style="\n        width: ".concat(t.width,"px;\n        height: ").concat(t.height,"px;\n        font-size: ").concat(t.fontSize,"px;\n        font-family: ").concat(t.fontFile,";\n        color: ").concat(t.fontColor,";\n        letter-spacing: ").concat(t.wordSpacing,"px;\n        line-height: ").concat(t.lineSpacing,";\n        opacity: ").concat(t.transpancy,";\n      "),setTimeout((function(){i.$refs.input.focus()}),50),this.$emit("text-edit",!0)},handleDrrTextEditBlur:function(){if(this.isDivRange)return this.isDivRange=!1,this.$refs.input.focus(),this.$store.commit("drrActive",{activeTarget:"text",list:"textTrackList",playingName:"playingText",vm:this}),!1;this.handleDrrTextEditEnd()},handleDrrTextEditEnd:function(){this.isEdit=!1,this.$emit("text-edit",!1),this.$store.commit("drrTextChange",{text:this.editText,trackIndex:this.trackIndex})}}},st=rt,ot=(i("dd7b"),Object(T["a"])(st,at,nt,!1,null,"1c00692e",null)),ct=ot.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"video-controls"},[i("div",{staticClass:"controls-icons"},[t.videoPlay?t._e():i("el-image",{staticClass:"controls-play",attrs:{src:t.controlsIcons.play},on:{click:t.handleVideoPlay}}),t.videoPlay?i("el-image",{staticClass:"controls-pause",attrs:{src:t.controlsIcons.pause},on:{click:t.handleVideoPause}}):t._e()],1),i("el-slider",{staticClass:"video-slider",attrs:{min:0,max:t.trackDuration,step:.1,"format-tooltip":t.formatTooltip},on:{change:t.handleSliderChange},nativeOn:{mousedown:function(e){return t.handleVideoPause(e)}},model:{value:t.sliderData,callback:function(e){t.sliderData=e},expression:"sliderData"}}),i("div",{staticClass:"controls-duration"},[t._v(" "+t._s(t.trackCurrentTimeString)+" / "+t._s(t.trackDurationString)+" ")])],1)])},dt=[],ut={props:{videoPlay:{type:Boolean,default:!1},trackDuration:{type:Number,default:0},trackCurrentTime:{type:Number,default:0}},data:function(){return{controlsIcons:{play:i("df84"),pause:i("88ae")},sliderData:0,trackCurrentTimeString:"00:00:00",trackDurationString:"00:00:00"}},watch:{trackDuration:function(t){return this.trackDurationString=u(this.trackDuration),t},trackCurrentTime:function(t){this.sliderData=t,this.trackCurrentTimeString=u(this.sliderData)}},methods:{handleVideoPlay:function(){this.$emit("video-play")},handleVideoPause:function(){this.$emit("video-pause")},handleSliderChange:function(){this.trackCurrentTimeString=u(this.sliderData),this.$emit("slider-change",this.sliderData)},formatTooltip:function(t){return u(t)}},created:function(){this.trackDurationString=u(this.trackDuration),this.sliderData=this.trackCurrentTime}},ht=ut,mt=(i("44fc"),Object(T["a"])(ht,lt,dt,!1,null,"50911f8a",null)),pt=mt.exports,gt={components:{PictureDrr:it,TextDrr:ct,VideoControls:pt},props:{isSaveOrSubmit:{type:Boolean,default:!1},isHighlight:{type:Boolean,default:!1},saveOrSubmit:{type:Number,default:0},editId:{type:Number,default:void 0},formInfo:{type:Object,default:function(){}},videoFrame:{type:Object,default:function(){}},highlightList:{type:Array,default:function(){}}},data:function(){return{dialogTitle:"",isVideoLoading:!1,videoSrc:"",submitVideo:void 0,currentTime:0,lastPlayedMaterial:{},playingMaterial:{},playingPicture:[],playingText:[],playingTransition:{},playingPictureIndex:[],playingTextIndex:[],videoPlay:!1,trackCurrentTime:0,trackCurrentTimeString:"00:00:00",trackDuration:0,controlsIcons:{play:i("df84"),pause:i("88ae")},coverList:[],mediaImageUploadUrl:"",videoInfo:{editId:"",videoTitle:"",businessType:null,categoryId:null,categoryName:"",productType:0,tag:[],picH:"",picV:"",fileId:"",define:"1080P",status:"",videoType:0,submitTime:"",createdTime:"",modifyTime:"",url:"",userId:"",duration:0,firstVideoH:0,firstVideoV:0},businessTypeList:[],categoryTypeList:[],realCategoryTypeList:[],educationType:{tagEnName:30,tagCnName:"教育"},productTypeList:[{id:0,label:"短视频"},{id:1,label:"高能片段"}],addTagName:"",submitRules:{videoTitle:[{required:!0,message:"请输入作品名称"}],businessType:[{required:!0,message:"请选择业务分类",trigger:"blur"}],categoryId:[{required:!0,message:"请选择内容分类",trigger:"blur"}],productType:[{required:!0,message:"请选择作品类型",trigger:"blur"}],tag:[{required:!0,message:"请添加标签"}],picH:[{required:!0,message:"请添加横封面图"}],picV:[{required:!0,message:"请添加竖封面图"}],define:[{required:!0,message:"请选择清晰度"}]},saveRules:{videoTitle:[{required:!0,message:"请输入作品名称"}]},buttonText:"",loadingPicH:!1,loadingPicV:!1,loadingSave:!1,isLoading:!1,isLoadingSelect:!1,realSelectedList:[],realAddedList:[],realPictureList:[],realTextList:[],reversePictureList:[],reverseTextList:[],isEnd:!1,tracks:[{target:"playingMaterial",list:"realSelectedList"},{target:"playingPicture",list:"realPictureList"},{target:"playingText",list:"realTextList"}],canvasWidth:100,canvasVideo:null,canvasTimer:null,widthScale:0,heightScale:0,oldPictureIndex:null}},computed:Object(c["a"])({},Object(g["c"])({materialTabList:function(t){return t.materialTabList},materialTrackList:function(t){return t.materialTrackList},pictureTrackList:function(t){return t.pictureTrackList},textTrackList:function(t){return t.textTrackList}})),watch:{materialTrackList:function(t){t||(this.$message({type:"error",message:"未获取到轨道素材信息，请重新保存或提交"}),this.$emit("submit-close"))},playingPicture:function(t){if(this.oldPictureIndex===this.playingPictureIndex[0])return!0;this.oldPictureIndex=this.playingPictureIndex[0],t[0]&&"video"===t[0].fileType&&(this.videoPlay?this.playVideoPicture(t[0],!0):this.playVideoPicture(t[0],!1))}},methods:{handleDialogClose:function(){this.editId||this.videoInfo.tag.splice(0),this.$emit("submit-close")},handleVideoPlayOrPause:function(){this.videoPlay?this.handleVideoPause():this.handleVideoPlay()},handleVideoPlaying:function(){if(!this.videoPlay)return!1;this.trackCurrentTime>=this.trackDuration&&(this.trackCurrentTime=0,this.isEnd=!0),this.videoInfo.firstVideoH||this.videoSrc!==this.realSelectedList[0].playUrl||(this.videoInfo.firstVideoH=this.submitVideo.videoWidth,this.videoInfo.firstVideoV=this.submitVideo.videoHeight),this.submitVideo.currentTime<this.playingMaterial.startTime&&(this.submitVideo.currentTime=this.playingMaterial.startTime),this.trackCurrentTime=this.submitVideo.currentTime+this.playingMaterial.trackStartTime-this.playingMaterial.startTime,this.trackCurrentTimeString=u(this.trackCurrentTime),this.trackCurrentTime>=this.trackDuration&&(this.trackCurrentTime=0,this.isEnd=!0),this.getPlayingMaterial(),this.handleVideoChange()},playVideoPicture:function(t,e){var i=this;this.$nextTick((function(){var a=i.$refs.pictureDrr[0].$refs.drrTarget[0];a.currentTime=i.trackCurrentTime-t.trackStartTime,i.getDrrElement("playingPicture","pictureDrr"),e&&setTimeout((function(){i.videoPlay&&a.play()}),150)}))},handleVideoPlay:function(){var t=this;setTimeout((function(){t.submitVideo.currentTime=t.currentTime,t.submitVideo.play(),t.videoPlay=!0;var e=t.$refs.pictureDrr[0].$refs.drrTarget?t.$refs.pictureDrr[0].$refs.drrTarget[0]:null;if(e&&"video"===t.playingPicture[0].fileType){var i=t.trackCurrentTime-t.playingPicture[0].trackStartTime;isNaN(i)||(e.currentTime=t.trackCurrentTime-t.playingPicture[0].trackStartTime,e.play())}}),150)},handleVideoPause:function(){this.videoPlay=!1,this.submitVideo.pause();var t=this.$refs.pictureDrr[0].$refs.drrTarget?this.$refs.pictureDrr[0].$refs.drrTarget[0]:null;t&&"video"===this.playingPicture[0].fileType&&(this.oldPictureIndex=null,t.pause())},handleVideoChange:function(){var t=this,e=this.playingMaterial.playUrl,i=this.lastPlayedMaterial.playUrl,a=this.playingMaterial.trackStartTime,n=this.lastPlayedMaterial.trackStartTime,r=this.playingMaterial.startTime+this.trackCurrentTime-this.playingMaterial.trackStartTime;if(this.currentTime=r,!this.videoPlay)return this.videoSrc=this.playingMaterial.playUrl,this.submitVideo.currentTime=r,1;e!==i&&(this.videoSrc=this.playingMaterial.playUrl,this.submitVideo.src=this.playingMaterial.playUrl,this.submitVideo.currentTime=r,this.submitVideo.pause(),setTimeout((function(){t.submitVideo.play()}),150)),e===i&&a!==n&&(this.submitVideo.currentTime=r),this.isEnd&&(this.submitVideo.currentTime=r,this.isEnd=!1)},handleSliderChange:function(t){this.trackCurrentTime=t,this.trackCurrentTimeString=u(this.trackCurrentTime),this.getPlayingMaterial(),this.handleVideoChange(),this.drawCanvasCover()},handleBusinessTypeChange:function(t){1*t===1?(this.realCategoryTypeList=[],this.realCategoryTypeList.push(this.educationType),this.videoInfo.categoryId=30,this.videoInfo.categoryName="教育"):this.realCategoryTypeList=this.categoryTypeList},handleCategorySelelct:function(t){var e=this.categoryTypeList.find((function(e){return 1*e.tagEnName===1*t}));this.videoInfo.categoryName=e.tagCnName},handleTagDelete:function(t){this.videoInfo.tag.splice(t,1)},handleAddTag:function(){var t=this.addTagName.replace(/\s/g,""),e=this.videoInfo.tag.findIndex((function(e){return e===t}));-1!==e&&this.$message({type:"warning",message:"该标签已存在"}),t&&-1===e&&(this.videoInfo.tag.push(t),this.addTagName=""),this.addTagName="",this.$refs.videoInfo.validateField("tag")},handleUploadChange:function(t,e){e.length>1&&e.splice(0,1)},handleUploadSuccess:function(t,e){t?(this.videoInfo.picV=e.url,this.loadingPicV=!1,this.$refs.videoInfo.validateField("picV")):(this.videoInfo.picH=e.url,this.loadingPicH=!1,this.$refs.videoInfo.validateField("picH"))},handleUploadBefore:function(t){t?this.loadingPicV=!0:this.loadingPicH=!0},handleUploadCanvas:function(){},handleSubmitValid:function(){var t=this;if(this.loadingSave)return!1;this.submitVideo.pause(),this.$refs.videoInfo.validate((function(e){e&&t.handleVideoSubmit()}))},handleVideoSubmit:function(){var t=this;this.isLoading=!0;var e=[];e.push(this.judgeCoverType()),e.push(this.formatAllMaterial()),Promise.all(e).then((function(){})).catch((function(){t.isLoading=!1,t.$message.error("网络异常，请稍后再试")}))},transferBase64ToFile:function(t){var e=t.split(","),i=e[0].match(/:(.*?);/)[1],a=atob(e[1]),n=a.length,r=new Uint8Array(n);while(n--)r[n]=a.charCodeAt(n);return new File([r],"cover.jpg",{type:i})},judgeCoverType:function(){var t=/base64/,e=t.test(this.videoInfo.picH),i=t.test(this.videoInfo.picV),a=[];return e&&a.push(this.handleUploadCanvas(this.videoInfo.picH,0)),i&&a.push(this.handleUploadCanvas(this.videoInfo.picV,1)),Promise.all(a)},formatAllMaterial:function(){var t=this;this.loadingSave=!0;var e=[];this.realSelectedList.forEach((function(i,a){i.startTime=Math.floor(i.startTime),i.endTime=Math.floor(i.endTime),i.trackStartTime=Math.floor(i.trackStartTime),i.trackEndTime=Math.floor(i.trackEndTime),i.duration=Math.floor(i.duration),/base64/.test(i.cover)&&e.push(t.handleUploadCanvas(i.cover,3,a))})),this.realAddedList.forEach((function(i,a){i.duration=Math.floor(i.duration),/base64/.test(i.cover)&&e.push(t.handleUploadCanvas(i.cover,2,a))}));for(var i=[{list:"realPictureList",length:this.realPictureList.length},{list:"realTextList",length:this.realTextList.length}],a=function(e){var a=i[e].list,n=i[e].length;if(!t[a]||!n)return"continue";for(var r=t.realSelectedList[t.realSelectedList.length-1],s=0;s<n;s++){var o=t[a][s].findIndex((function(t){return t.trackStartTime<r.trackEndTime&&t.trackEndTime>=r.trackEndTime}));-1!==o&&t.saveOrSubmit&&(t[a][s].splice(o+1),t[a][s][o].trackEndTime=r.trackEndTime),t[a][s].forEach((function(e){e.startSecond=Math.floor(e.trackStartTime),e.endSecond=Math.floor(e.trackEndTime),e.xAxis=Math.round(t.videoInfo.firstVideoH/t.videoFrame.width*e.nowXAxis),e.yAxis=Math.round(t.videoInfo.firstVideoV/t.videoFrame.height*e.nowYAxis);var i=Math.round(t.videoInfo.firstVideoH/t.videoFrame.width*e.width),n=Math.round(t.videoInfo.firstVideoV/t.videoFrame.height*e.height);"realPictureList"===a&&(e.mergeZoom=i+":"+n,e.watermark=e.fileUrl)}))}},n=0;n<i.length;n++)a(n);return Promise.all(e).finally((function(){t.loadingSave=!1}))},getDrrElement:function(t,e){for(var i=0;i<this[t].length;i++)this.$store.commit("drrElementData",{way:!1,isSubmit:!0,index:this[t+"Index"][i],target:this[t][i],vm:this.$refs[e][0],scale:{width:this.widthScale,height:this.heightScale}})},getPlayingMaterial:function(){var t=this;this.lastPlayedMaterial=Object.assign({},this.playingMaterial),this.tracks.forEach((function(e){t.getPlaying(e)}))},getPlaying:function(t){var e=this.trackCurrentTime,i=t.list,a=t.target,n=null;if("realSelectedList"===i)n=this[i].findIndex((function(t){return t.trackStartTime<=e&&t.trackEndTime>e})),this[a]=-1===n?void 0:this[i][n],this[a]||(this[a]=this[i][0]);else{for(var r=[],s=[],o=0;o<this[i].length;o++)if(this[i][o]){n=this[i][o].findIndex((function(t){return t.trackStartTime<=e&&t.trackEndTime>e}));var c=-1===n?void 0:this[i][o][n];r.push(c),s.push(n)}this[a]=r,this[a+"Index"]=s}},getSaveParams:function(){var t=Object(c["a"])({},this.videoInfo);return t.tag=this.videoInfo.tag.toString(),t.rlsList=this.realSelectedList,t.rlsVideos=this.realAddedList,t.pics=this.realPictureList[0],t.transitionsDTOS=[],t.textDTOS=this.realTextList,t},getCoverByVideo:function(){var t=document.createElement("canvas"),e=document.createElement("canvas"),i=this.submitVideo,a=i.videoWidth/3,n=i.videoHeight;t.width=640,t.height=360,e.width=640/3,e.height=360,t.getContext("2d").drawImage(i,0,0,t.width,t.height),e.getContext("2d").drawImage(i,a,0,a,n,0,0,e.width,e.height),this.videoInfo.picH=t.toDataURL("image/jpeg"),this.videoInfo.picV=e.toDataURL("image/jpeg"),this.$refs.videoInfo.validateField("picV"),this.$refs.videoInfo.validateField("picH")},getReverseIndex:function(t,e){return e-1+t+-2*t},getAdviceTag:function(){},initForm:function(){this.videoInfo=Object(c["a"])({},this.formInfo),1===this.videoInfo.tag.length&&""===this.videoInfo.tag[0]&&this.videoInfo.tag.pop(),this.isLoadingSelect=!1},initData:function(){var t=this.realSelectedList[this.realSelectedList.length-1];this.videoInfo.videoType=this.saveOrSubmit,this.videoInfo.duration=t.trackEndTime,this.trackDuration=Math.floor(t.trackEndTime),this.playingMaterial=this.realSelectedList[0],this.videoSrc=this.realSelectedList[0].playUrl,this.currentTime=Math.round(this.realSelectedList[0].startTime)},initDrrScale:function(){this.widthScale=640/this.videoFrame.width,this.heightScale=360/this.videoFrame.height},fetchData:function(){},stopCanvasVideo:function(){clearInterval(this.canvasTimer)},drawCanvasVideo:function(){var t=this.canvasVideo,e=t.getContext("2d"),i=this.submitVideo;t.width=1280,t.height=720,this.canvasTimer=setInterval((function(){e.drawImage(i,0,0,t.width,t.height)}),40)},drawCanvasCover:function(){var t=this.canvasVideo,e=t.getContext("2d"),i=this.submitVideo;t.width=1280,t.height=720,e.drawImage(i,0,0,t.width,t.height),this.isVideoLoading=!1}},created:function(){this.realSelectedList=this.isHighlight?JSON.parse(JSON.stringify(this.highlightList)):JSON.parse(JSON.stringify(this.materialTrackList)),this.realAddedList=this.isHighlight?JSON.parse(JSON.stringify(this.highlightList)):JSON.parse(JSON.stringify(this.materialTabList)),this.realPictureList=this.pictureTrackList?JSON.parse(JSON.stringify(this.pictureTrackList)):[],this.realTextList=this.textTrackList?JSON.parse(JSON.stringify(this.textTrackList)):[],this.reversePictureList=this.pictureTrackList?JSON.parse(JSON.stringify(this.pictureTrackList)).reverse():[],this.reverseTextList=this.textTrackList?JSON.parse(JSON.stringify(this.textTrackList)).reverse():[],this.fetchData(),this.editId&&(this.isLoadingSelect=!0,this.initForm()),this.formatAllMaterial(),this.saveOrSubmit?(this.dialogTitle="提交剪辑",this.buttonText="确认提交"):(this.dialogTitle="保存剪辑",this.buttonText="确认保存"),this.isHighlight||this.productTypeList.pop()},mounted:function(){var t=this;this.initData(),this.$nextTick((function(){t.submitVideo=t.$refs.submitVideo,t.canvasVideo=t.$refs.canvasVideo,t.isHighlight||t.initDrrScale(),t.handleVideoPlay()}))}},ft=gt,vt=(i("554c"),i("5f66"),Object(T["a"])(ft,_,J,!1,null,"b3346196",null)),Tt=vt.exports,xt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},kt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"message"},[i("span",[t._v("功能开发中")])])])}],yt=(i("82b3"),{}),bt=Object(T["a"])(yt,xt,kt,!1,null,"64763dce",null),At=bt.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"ul-style"},[i("li",{on:{click:t.handleTrackAdd}},[i("i",{staticClass:"el-icon-plus"}),i("span",[t._v(" 添加"+t._s(t.text)+"轨")])]),i("li",{on:{click:t.handleTrackDelete}},[i("i",{staticClass:"el-icon-minus"}),i("span",[t._v(" 删除"+t._s(t.text)+"轨")])]),i("li",{on:{click:t.handleTrackCopy}},[i("i",{staticClass:"el-icon-copy-document"}),i("span",[t._v(" 复制当前轨道")])])])])},St=[],wt={props:{index:{type:Number,default:null},iconWidth:{type:Number,default:null},text:{type:String,default:null},name:{type:String,default:null}},computed:Object(c["a"])(Object(c["a"])({},Object(g["c"])({pictureTrackList:function(t){return t.pictureTrackList},textTrackList:function(t){return t.textTrackList}})),{},{listName:function(){return this.name+"TrackList"}}),methods:{handleTrackAdd:function(){this.judgeTrackSubLimit(5)&&this.$store.commit("trackAdd",{name:this.name,index:this.index,list:this.listName,vm:this})},handleTrackDelete:function(){if(1===this[this.listName].length)return this.$message({type:"warning",message:"删除失败，该类型轨道必须存在一条"}),!1;this.$store.commit("trackDelete",{name:this.name,index:this.index,list:this.listName,vm:this})},handleTrackCopy:function(){this.judgeTrackSubLimit(5)&&this.$store.commit("trackCopy",{name:this.name,index:this.index,list:this.listName,vm:this})},judgeTrackSubLimit:function(t){return this[this.listName].length!==t||(this.$message({type:"warning",message:"添加失败，该类型轨道条数已达上限"}),!1)}}},Ct=wt,Lt=(i("52c4"),Object(T["a"])(Ct,It,St,!1,null,"02bdaa5b",null)),Dt=Lt.exports,Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"material-tab"},[i("div",{staticClass:"material-container"},[i("Draggable",{attrs:{list:t.materialTabList,sort:!1,group:{name:"media",pull:"clone",put:!1},clone:t.handleMediaClone},on:{start:t.handleMaterialAddBefore,end:t.handleMaterialAdd}},t._l(t.materialTabList,(function(e,a){return i("div",{key:e.id+""+e.startTime+e.endTime+a,staticClass:"lastest-info",on:{mouseover:function(e){t.mouseTarget=a},mouseout:function(e){t.mouseTarget=null}}},[i("el-image",{attrs:{src:e.cover}}),i("i",{staticClass:"el-icon-delete material-delete",style:{display:t.mouseTarget===a?"block":"none"},on:{click:function(e){return t.handleMaterialDelete(a)}}}),i("i",{staticClass:"el-icon-circle-plus-outline material-add",style:{display:t.mouseTarget===a?"block":"none"},on:{click:function(i){return t.handleIconAdd(e,a)}}}),i("div",{staticClass:"material-duration"},[i("span",[t._v(t._s(t.getDuration(e.frameDuration)))])]),i("el-tooltip",{attrs:{disabled:e.videoTitle.length<14,placement:"bottom-start",content:e.videoTitle}},[i("div",{staticClass:"material-title"},[i("span",[t._v(t._s(e.videoTitle))])])])],1)})),0)],1),i("div",{staticClass:"methods-area"},[i("div",{staticClass:"methods-button-group"},[i("el-button",{staticClass:"methods-button",on:{click:function(e){return t.$emit("show-material-dialog")}}},[t._v("添加素材")]),i("el-upload",{ref:"materialUpload",staticClass:"location-upload",attrs:{accept:".mp4",action:t.uploadAction,disabled:t.isUploading,multiple:!1,"show-file-list":!1,"before-upload":t.judgeUploadType,"on-success":t.handleUploadSuccess}},[i("el-button",{staticClass:"methods-button",attrs:{disabled:t.isUploading}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isUploading,expression:"!isUploading"}]},[t._v("本地上传")]),i("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isUploading,expression:"isUploading"}],attrs:{color:"#26CB51",type:2}})],1)],1),i("span",{staticClass:"message"},[t._v(" *本地上传功能开发中")])],1)])])},Et=[],Nt=i("b76a"),Ft=i.n(Nt),Mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loading-container",style:{color:t.color,"padding-left":"15px"}},[1===t.type?i("div",{staticClass:"type-one"}):t._e(),2===t.type?i("div",{staticClass:"type-four"},[i("div",{staticClass:"type-four-one"}),i("div",{staticClass:"type-four-two"}),i("div",{staticClass:"type-four-three"})]):t._e()])},Ot=[],Bt={props:{color:{type:String,default:"#ef6139"},type:{type:Number,default:1}}},Vt=Bt,$t=(i("39fa"),Object(T["a"])(Vt,Mt,Ot,!1,null,"ea5f889a",null)),Ut=$t.exports,Rt={components:{Draggable:Ft.a,Loading:Ut},props:{editId:{type:Number,default:null}},data:function(){return{isLimit:!1,mouseTarget:null,loadingImage:i("43f9"),uploadAction:""}},computed:Object(c["a"])(Object(c["a"])({},Object(g["c"])({trackScale:function(t){return t.trackScale},defaultMaterialHeight:function(t){return t.defaultMaterialHeight},trackDuration:function(t){return t.trackDuration},materialFileLastLength:function(t){return t.materialFileLastLength},operationIndex:function(t){return t.operationIndex},operationName:function(t){return t.operationName},isMaterialUploading:function(t){return t.isMaterialUploading},isEditMaterialUploading:function(t){return t.isEditMaterialUploading},isCloseClip:function(t){return t.isCloseClip},selected:function(t){return t.selected},materialTabList:function(t){return t.materialTabList},materialFileList:function(t){return t.materialFileList},materialTrackList:function(t){return t.materialTrackList},materialTrackWidth:function(t){return t.materialTrackWidth}})),{},{isUploading:function(){return this.editId?this.isEditMaterialUploading:this.isMaterialUploading}}),watch:{materialFileList:function(t){if(t.length<=this.materialFileLastLength)return this.$store.commit("updateValue",{name:"materialFileLastLength",value:t.length}),!0;var e=t[t.length-1];this.isCloseClip?(this.editId||this.$store.commit("updateArrayAdd",{name:"materialTabList",value:e}),this.$store.commit("updateValue",{name:"isCloseClip",value:!1})):this.$store.commit("updateArrayAdd",{name:"materialTabList",value:e}),this.$store.commit("updateValue",{name:"materialFileLastLength",value:t.length})},materialTabList:function(t){var e=this;this.$nextTick((function(){e.getMaterialLoad(t)}))},materialTrackList:function(t){var e=this;this.$nextTick((function(){var i=t.length>0?t[t.length-1].trackEndTime:0;if(void 0===i)return!0;e.judgeTrackDuration(i)}))}},methods:{handleMediaClone:function(t){return Object(c["a"])({},t)},handleMaterialAddBefore:function(t){var e=this.trackDuration,i=this.materialTabList[t.oldIndex];return e+i.frameDuration>5400?(this.$message("添加后轨道素材将超过时长上限(1.5小时)，请进行剪删操作后再添加"),this.isLimit=!0,!1):-1!==i.cover.indexOf("material1004")?(this.$message("素材加载中，暂不可用"),this.isLimit=!0,!1):void 0},handleMaterialAdd:function(t){if(t.from===t.to)return!1;if(this.isLimit)return this.$store.commit("updateArrayDelete",{name:"materialTrackList",index:t.newIndex,amount:1}),this.isLimit=!1,!1;var e=t.newIndex,i=this.materialTrackList.length-1,a=this.materialTrackList,n=this.materialTrackList[e],r="",s=n.frameDuration;if(this.$store.commit("updateObjectAttribute",{name:"selected",attr:"duration",value:s}),this.$store.commit("updateValue",{name:"materialTrackWidth",value:this.materialTrackWidth+s*this.trackScale}),e===i)r=document.getElementById("clip"+e);else{for(var o=i;o>e;o--){var c=document.getElementById("clip"+(o-1)),l=document.getElementById("clip"+o);l.style="\n            width: ".concat(c.style.width,";\n            height: ").concat(c.style.height,";\n            background-image: ").concat(c.style.backgroundImage,";\n            background-size: auto 100%;\n          "),this.$store.commit("updateMateriaTime",{duration:s,index:o,operator:1})}r=document.getElementById("clip"+e)}r.style="\n        width: ".concat(s*this.trackScale,"px;\n        height: ").concat(this.defaultMaterialHeight,"px;\n        background-image: url(").concat(n.cover,");\n        background-size: auto 100%;\n      ");var d=e?a[e-1].trackEndTime:0,u={trackStartTime:d,trackEndTime:d+s,startTime:n.startFrame,endTime:n.endFrame};for(var h in u)this.$store.commit("updateArrayObjectAttr",{name:"materialTrackList",index:e,attr:h,value:u[h]});this.judgeTrackDuration(this.materialTrackList[i].trackEndTime),this.$emit("selected-click",r,e,"materialTrackList"),1===this.materialTrackList.length&&(this.$emit("video-data",n.playUrl,0),this.$emit("video-cover",this.materialTrackList[0].startFrame))},handleMaterialDelete:function(t){var e=this.materialTabList[t],i=this.materialTrackList.find((function(t){return t.coocaaMId===e.coocaaMId&&t.startFrame===e.startFrame&&t.endFrame===e.endFrame}));if(i)return this.$message({type:"warning",message:"该素材已在轨道中使用，不可删除"}),!1;if(1*e.coocaaVId===-1){var a=this.materialFileList.findIndex((function(t){return t.fileId===e.fileId}));this.$store.commit("updateArrayDelete",{name:"materialTabList",index:t,amount:1}),this.$store.commit("updateArrayDelete",{name:"materialFileList",index:a,amount:1})}else this.$store.commit("updateArrayDelete",{name:"materialTabList",index:t,amount:1})},handleIconAdd:function(t,e){var i=this,a=Object(c["a"])({},t),n={from:0,to:1};n.newIndex=this.materialTrackList.length,n.oldIndex=e,this.$store.commit("updateArrayAdd",{name:"materialTrackList",value:a}),this.$nextTick((function(){i.handleMaterialAddBefore(n),i.handleMaterialAdd(n)}))},handleUploadSuccess:function(t){this.handleUploadCoverDraw(t.data)},handleUploadCoverDraw:function(t){var e=this;t.fileId=this.materialFileList.length;var i=document.createElement("canvas"),a=document.createElement("video");a.setAttribute("crossOrigin","*"),a.src=t.playUrl,a.currentTime=2,i.width=170,i.height=100,a.onloadeddata=function(){if(e.isUploading){i.getContext("2d").drawImage(a,0,0,i.width,i.height),t.cover=i.toDataURL("image/jpeg"),t.startTime=t.startFrame,t.endTime=t.endFrame,e.$store.commit("updateArrayAdd",{name:"materialFileList",value:t}),e.editId||e.$store.commit("updateArrayAdd",{name:"materialTabNewList",value:t});var n=e.editId?"isEditMaterialUploading":"isMaterialUploading";e.$store.commit("updateValue",{name:n,value:!1})}}},judgeTrackDuration:function(t){this.$store.commit("updateTracksDuration",{name:"material",duration:t}),this.$store.commit("updateValue",{name:"trackDuration",value:t}),0===this.trackDuration&&this.$emit("update-date",0,!1)},judgeUploadType:function(t){if("video/mp4"!==t.type)return this.$message({message:"仅支持上传MP4格式视频",type:"warning"}),!1;var e=this.materialFileList.find((function(e){return e.name===t.name})),i=t.name.split(".")[0],a=this.materialTabList.find((function(t){return t.videoTitle===i}));if(e||this.editId&&a)return this.$message({message:"已选素材中已有同名文件, 请勿重复上传",type:"warning"}),!1;var n=this.editId?"isEditMaterialUploading":"isMaterialUploading";this.$store.commit("updateValue",{name:n,value:!0}),this.$store.commit("updateValue",{name:"isCloseClip",value:!1})},getDuration:function(t){return u(t)},getMaterialLoad:function(t){for(var e=this,i="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCABuAMgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAn/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//Z",a=function(a){var n=t[a].cover;if(-1===n.indexOf("material1004"))return"continue";var r=document.createElement("canvas"),s=document.createElement("video");r.width=200,r.height=110,s.setAttribute("crossOrigin","*"),s.src=t[a].playUrl,s.currentTime=1,s.oncanplay=function(){if(!t[a])return!1;if(-1===s.src.indexOf(t[a].playUrl)||-1===t[a].cover.indexOf("material1004"))return!1;r.getContext("2d").drawImage(s,0,0,r.width,r.height);var n=r.toDataURL("image/jpeg"),o=n===i?e.loadingImage:n;e.$store.commit("updateArrayObjectAttr",{name:"materialTabList",index:a,attr:"cover",value:o}),s.oncanplay=null,s=null,r=null}},n=0;n<t.length;n++)a(n)}},mounted:function(){this.getMaterialLoad(this.materialTabList)},beforeDestroy:function(){this.$store.commit("updateValue",{name:"isCloseClip",value:!0}),this.editId&&this.isEditMaterialUploading&&(this.$refs.materialUpload.abort(),this.$store.commit("updateValue",{name:"isEditMaterialUploading",value:!1}))}},zt=Rt,jt=(i("f090"),Object(T["a"])(zt,Pt,Et,!1,null,"5806e04d",null)),Xt=jt.exports,Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Draggable",{staticClass:"drag-target",attrs:{group:"media","ghost-class":"drag-ghost",list:t.materialTrackList,animation:300},on:{start:t.handleSelectedStart,update:t.handleSelectedSort}},t._l(t.materialTrackList,(function(e,a){return i("div",{key:a,staticClass:"track-container"},[i("div",{ref:"clip"+a,refInFor:!0,staticClass:"video-images",attrs:{id:"clip"+a},on:{click:function(e){return t.$emit("selected-click",e,a,"materialTrackList")}}})])})),0)],1)},Qt=[],Yt={components:{Draggable:Ft.a},props:{videoPlay:{type:Boolean,default:!1}},data:function(){return{trackContainer:null}},computed:Object(c["a"])({},Object(g["c"])({trackScale:function(t){return t.trackScale},operationIndex:function(t){return t.operationIndex},operationNewIndex:function(t){return t.operationNewIndex},operationName:function(t){return t.operationName},materialTrackList:function(t){return t.materialTrackList},materialTrackWidth:function(t){return t.materialTrackWidth}})),watch:{materialTrackWidth:function(t){this.trackContainer.style.width=t+"px"}},methods:{handleSelectedStart:function(t){var e="clip"+t.oldIndex;this.$emit("selected-click",this.$refs[e][0],t.oldIndex,"materialTrackList")},handleSelectedSort:function(t){this.videoPlay&&this.$emit("video-pause");var e=t.newIndex,i=t.oldIndex,a=0,n=document.getElementById("clip"+e),r=document.getElementById("clip"+i),s={width:r.style.width,height:r.style.height,backgroundImage:r.style.backgroundImage},o=this.getDurationByWidth(r.offsetWidth);if(e>i){for(var c=i;c<e;c++){var l=document.getElementById("clip"+(c+1)),d=document.getElementById("clip"+c);a+=l.offsetWidth,this.updateStyle(d,l.style.width,l.style.height,l.style.backgroundImage),this.$store.commit("updateMateriaTime",{duration:o,index:c,operator:0})}var u=this.getDurationByWidth(a);this.$store.commit("updateMateriaTime",{duration:u,index:e,operator:1})}else{for(var h=i;h>e;h--){var m=document.getElementById("clip"+(h-1)),p=document.getElementById("clip"+h);a+=m.offsetWidth,this.updateStyle(p,m.style.width,m.style.height,m.style.backgroundImage),this.$store.commit("updateMateriaTime",{duration:o,index:h,operator:1})}var g=this.getDurationByWidth(a);this.$store.commit("updateMateriaTime",{duration:g,index:e,operator:0})}this.updateStyle(n,s.width,s.height,s.backgroundImage),this.$store.commit("updateValue",{name:"operationName",value:"sort"}),this.$emit("selected-click",n,e,"materialTrackList")},updateStyle:function(t,e,i,a){t.style="\n        width: ".concat(e,";\n        height: ").concat(i,";\n        background-image: ").concat(a,";\n        background-size: auto 100%;\n      ")},getDurationByWidth:function(t){return t/this.trackScale}},mounted:function(){this.trackContainer=document.querySelector(".drag-target")}},_t=Yt,Jt=(i("f90d"),Object(T["a"])(_t,Wt,Qt,!1,null,"f19d6efc",null)),Ht=Jt.exports,qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"picture-tab"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"picture"!==t.activeName,expression:"activeName !== 'picture'"}],staticClass:"picture-container"},[t.isShowLocal?t._e():i("div",{staticClass:"category-container"},[i("div",t._l(t.firstCategoryList,(function(e){return i("div",{key:e.id,class:{"category-style":!0,"category-active":t.firstCategory.categoryId===e.categoryId},on:{click:function(i){return t.handleSecondCategorySearch(e)}}},[t._v(t._s(e.categoryName))])})),0),i("div",t._l(t.secondCategoryList,(function(e){return i("div",{key:e.id,class:{"category-style":!0,"category-active":t.secondCategory.categoryId===e.categoryId},on:{click:function(i){return t.handlePictureSearch(e)}}},[t._v(t._s(e.categoryName))])})),0)]),(t.isShowLocal?0===t.pictureFileList.length:t.isEmpty)?i("div",{staticClass:"picture-empty"},[i("span",[t._v("暂无贴图")])]):i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isPictureLoading,expression:"isPictureLoading"},{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handlePictureMore,expression:"handlePictureMore"}],class:{"picture-list":!0,"local-picture-list":t.isShowLocal},staticStyle:{"overflow-y":"scroll"},attrs:{"infinite-scroll-delay":300,"infinite-scroll-distance":10}},t._l(t.isShowLocal?t.pictureFileList:t.pictureList.slice(0,t.picShowAmount),(function(e,a){return i("div",{key:e.picId,staticClass:"picture-style",on:{mouseenter:function(i){return t.handlePictureOver(a,e)},mouseleave:t.handlePictureOut,mousedown:function(i){return t.judgePictureDraggable(e)}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.mouseTarget===a,expression:"mouseTarget === index"}],staticClass:"el-icon-circle-plus-outline picture-plus-icon",attrs:{title:"添加"},on:{click:function(i){return t.handlePictureIconAdd(e)}}}),i("i",{directives:[{name:"show",rawName:"v-show",value:t.mouseTarget===a&&t.isShowLocal,expression:"mouseTarget === index && isShowLocal"}],staticClass:"el-icon-delete picture-delete-icon",attrs:{title:"删除"},on:{click:function(e){return t.handleLocalPictureDelete(a)}}}),i("el-image",{attrs:{fit:"contain",lazy:"",src:e.picUrl,draggable:0!==t.materialTrackList.length&&!!e.duration},on:{dragstart:function(i){return t.handlePictureStart({e:i,item:e,index:a,list:"pictureTrackList",prefix:"picture",trackId:"pictureTrack",isTrackDrag:!1})},drag:t.handlePictureDragging,dragend:t.handlePictureDragEnd}},[i("el-image",{attrs:{slot:"error",fit:"contain",src:t.loadingImage},slot:"error"})],1)],1)})),0),i("div",{staticClass:"button-style"},[i("el-upload",{staticClass:"location-upload",attrs:{accept:".png",action:t.uploadAction,disabled:t.isPictureUploading,multiple:!1,"show-file-list":!1,"before-upload":t.judgeUploadType,"on-success":t.handleUploadSuccess}},[i("el-button",{staticClass:"methods-button",attrs:{disabled:t.isPictureUploading}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isPictureUploading,expression:"!isPictureUploading"}]},[t._v("本地上传")]),i("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isPictureUploading,expression:"isPictureUploading"}],attrs:{color:"#26CB51",type:2}})],1)],1),i("span",{staticClass:"message"},[t._v(" *本地上传功能开发中")])],1),i("div",{staticClass:"picture-icons"},[i("i",{class:{"el-icon-menu":!0,"active-picture-list":!t.isShowLocal},on:{click:t.handleNetworkPictureShow}}),i("i",{class:{"el-icon-upload":!0,"active-picture-list":t.isShowLocal},on:{click:t.handleLocalPictureShow}})])]),i("el-card",{directives:[{name:"show",rawName:"v-show",value:t.isShowCard,expression:"isShowCard"},{name:"loading",rawName:"v-loading",value:t.isCardLoading,expression:"isCardLoading"}],staticClass:"picture-card"},["picture"===t.cardType?i("el-image",{attrs:{fit:"contain",src:t.cardSrc},on:{load:t.loadedCardContent}}):t._e(),"video"===t.cardType?i("video",{attrs:{loop:"",muted:"",autoplay:"",src:t.cardSrc},domProps:{muted:!0},on:{canplaythrough:t.loadedCardContent}}):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"picture"===t.activeName,expression:"activeName === 'picture'"}],staticClass:"operation-tab"},[i("div",[i("span",[t._v("旋转")]),i("el-slider",{staticClass:"operation-area",attrs:{"show-input":!0,"show-tooltip":!1,min:0,max:360},model:{value:t.tabRotate,callback:function(e){t.tabRotate=e},expression:"tabRotate"}})],1),i("div",[i("span",[t._v("缩放")]),i("el-slider",{staticClass:"operation-area",attrs:{id:"resize-button","show-input":!0,"show-tooltip":!1,min:0,max:2,step:.01},nativeOn:{mousedown:function(e){return t.beforePictureResize(e)}},model:{value:t.tabResize,callback:function(e){t.tabResize=e},expression:"tabResize"}})],1),i("div",[i("span",[t._v("透明度")]),i("el-slider",{staticClass:"operation-area",attrs:{"show-input":!0,"show-tooltip":!1,min:0,max:1,step:.1},model:{value:t.tabOpacity,callback:function(e){t.tabOpacity=e},expression:"tabOpacity"}})],1),i("div",[i("span",[t._v("翻转")]),i("div",{staticClass:"operation-area"},[i("i",{class:{"el-icon-d-caret":!0,"icon-ban":t.flip.h},on:{click:function(e){return t.handlePictureFlip("X")}}}),i("i",{class:{"el-icon-d-caret":!0,"horizontal-icon":!0,"icon-ban":t.flip.v},on:{click:function(e){return t.handlePictureFlip("Y")}}})])])])],1)},Gt=[],Kt={components:{Loading:Ut},props:{tabName:{type:String,default:null}},data:function(){return{mouseTarget:null,firstCategory:{},secondCategory:{},firstCategoryList:[],secondCategoryList:[],pictureList:[{modifyTime:"2021-01-18 15:28:56",thirdId:"1",createdTime:"2021-01-18 15:28:56",picUrl:i("e1df"),fileUrl:i("50b5"),title:"Circle",categoryId:129,fileType:"video",picId:1,status:1},{modifyTime:"2021-01-18 15:28:56",thirdId:"2",createdTime:"2021-01-18 15:28:56",picUrl:i("1e6d"),fileUrl:i("2bb4"),title:"Line",categoryId:128,fileType:"video",picId:2,status:1},{modifyTime:"2021-01-18 15:28:56",thirdId:"3",createdTime:"2021-01-18 15:28:56",picUrl:i("9e3f"),fileUrl:i("9e3f"),title:"Forest",categoryId:127,fileType:"picture",picId:3,status:1},{modifyTime:"2021-01-18 15:28:56",thirdId:"4",createdTime:"2021-01-18 15:28:56",picUrl:i("12af"),fileUrl:i("12af"),title:"Snow",categoryId:126,fileType:"picture",picId:4,status:1}],pictureFileList:[],picShowAmount:80,isListChange:!0,isEmpty:!1,isPictureLoading:!1,isShowLocal:!1,cardSrc:"",cardType:"",isCardLoading:!1,tabRotate:0,tabResize:1,tabOpacity:1,pagination:{currentPage:1,pageSize:20},flip:{v:!1,h:!1},loadingImage:i("43f9"),isShowCard:!1,uploadAction:""}},computed:Object(c["a"])({},Object(g["c"])({activeName:function(t){return t.activeName},isPictureUploading:function(t){return t.isPictureUploading},selected:function(t){return t.selected},selectedTarget:function(t){return t.selectedTarget},playingPicture:function(t){return t.playingPicture},playingPictureIndex:function(t){return t.playingPictureIndex},materialTrackList:function(t){return t.materialTrackList},pictureTrackList:function(t){return t.pictureTrackList}})),watch:{activeName:function(t){t||"pictureTab"!==this.tabName||this.$nextTick((function(){var t=document.querySelector(".picture-list");t&&document.querySelector(".picture-list").scrollTop++}))},selectedTarget:function(t){if(!t||!this.selected.type||"picture"!==this.activeName)return!0;this.initTab(t)},"selectedTarget.whirl":function(t){var e=t;t>360&&(e=t-360),t<0&&(e=t+360),this.tabRotate=e},tabRotate:function(t){if(!this.selectedTarget||t===this.selectedTarget.whirl)return!1;this.$store.commit("drrTabRotate",t)},tabResize:function(t){if(!this.selectedTarget||t===this.selectedTarget.scale)return!1;this.$store.commit("drrTabResize",t)},tabOpacity:function(t){if(!this.selectedTarget||t===this.selectedTarget.transparency)return!1;this.$store.commit("drrTabOpacity",t)}},methods:Object(c["a"])(Object(c["a"])({},Object(g["b"])({handlePictureStart:"dragStart",handlePictureDragging:"tabDragging",handlePictureDragEnd:"tabDragEnd"})),{},{beforePictureResize:function(){this.$store.commit("drrTabBeforeResize",this.tabResize)},handleSecondCategorySearch:function(){},handlePictureSearch:function(){},handlePictureMore:function(){this.picShowAmount<this.pictureList.length&&(this.picShowAmount+=20)},handlePictureOver:function(t,e){e.loaded?this.isCardLoading=!1:this.isCardLoading=!0,this.mouseTarget=t,this.cardSrc=e.fileUrl,this.cardType="json"===e.fileType?"picture":e.fileType,this.isShowCard=!0},handlePictureOut:function(){this.isCardLoading=!1,this.mouseTarget=null,this.isShowCard=!1},handlePictureIconAdd:function(t){if(0===this.materialTrackList.length||!t.duration)return!1;this.$emit("icon-add","picture",t)},handleLocalPictureDelete:function(t){this.pictureFileList.splice(t,1),localStorage.pictureFileList=JSON.stringify(this.pictureFileList),this.isShowCard=!1},judgeUploadType:function(t){if("image/png"!==t.type)return this.$message({message:"仅支持上传png格式贴图",type:"warning"}),!1;var e=this.pictureFileList.find((function(e){return-1!==t.name.indexOf(e.oldTitle)}));return e?(this.$message({message:"本地贴图中已有同名文件, 请勿重复上传",type:"warning"}),!1):void 0},handleUploadProgress:function(){this.$store.commit("updateValue",{name:"isPictureUploading",value:!0})},handleUploadSuccess:function(t){var e={picUrl:t.url,fileUrl:t.url,oldTitle:t.oldName.split(".")[0],title:"本地"+(this.pictureFileList.length+1),duration:10,size:t.fileSize,fileType:"picture"};this.pictureFileList.push(e),localStorage.pictureFileList=JSON.stringify(this.pictureFileList),this.$store.commit("updateValue",{name:"isPictureUploading",value:!1}),this.$message({type:"success",dangerouslyUseHTMLString:!0,message:'贴图上传成功，请到我的本地上传 -【<i class="el-icon-upload"></i>】中查看'})},handleNetworkPictureShow:function(){if(this.isPictureLoading)return!1;this.isShowLocal=!1,this.isListChange=!1,this.isListChange=!0},handleLocalPictureShow:function(){if(this.isPictureLoading)return!1;this.isShowLocal=!0,this.isListChange=!1,this.isListChange=!0},handlePictureFlip:function(t){if("X"===t&&this.flip.h||"Y"===t&&this.flip.v)return!1;"X"===t&&(this.flip.v=!this.flip.v),"Y"===t&&(this.flip.h=!this.flip.h),this.$store.commit("drrTabFlip",t)},judgePictureDraggable:function(t){return 0===this.materialTrackList.length?(this.$message({type:"warning",message:"视频轨道为空，请添加视频素材后再试"}),!1):!!t.duration||(this.$message("贴图加载中，右侧预览加载完毕后方可添加"),!1)},loadedCardContent:function(t){var e=this;this.isCardLoading=!1;var i=this.isShowLocal?this.pictureFileList:this.pictureList;if(-1!==t.target.src.indexOf(this.cardSrc)){var a=i.findIndex((function(t){return e.cardSrc===t.fileUrl}));"video"===this.cardType?i[a].duration=i[a].duration?i[a].duration:t.target.duration:i[a].duration=10,i[a].loaded=!0}},fetchData:function(){},initTab:function(t){this.tabRotate=t.whirl,this.tabResize=t.scale,this.tabOpacity=t.transparency,this.flip={v:-1!==t.overturn.indexOf("v"),h:-1!==t.overturn.indexOf("h")}}}),created:function(){var t=this;this.pictureFileList=localStorage.pictureFileList?JSON.parse(localStorage.pictureFileList):[],this.fetchData(),this.$nextTick((function(){"picture"===t.activeName&&t.initTab(t.selectedTarget)}))}},Zt=Kt,te=(i("fd2e"),Object(T["a"])(Zt,qt,Gt,!1,null,"7893438a",null)),ee=te.exports,ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pictureTrack",attrs:{id:"pictureTrack"+t.trackIndex},on:{dragenter:t.handlePictureDragEnter,dragover:t.handlePictureDragOver,dragend:t.handlePictureDragEnd,drop:t.handlePictureDrop}},t._l(t.trackList,(function(e,a){return i("div",{key:e.seq+""+a,staticClass:"pic-container"},[i("div",{ref:"picture"+a,refInFor:!0,staticClass:"pic-clip",attrs:{id:"picture"+a,draggable:!0},on:{click:function(e){return t.handleClick(e,a)},mousedown:function(e){return t.handleMouseDown(e,a,!0)},dragstart:function(i){return t.handleTrackPicDragStart({e:i,item:e,index:a,trackIndex:t.trackIndex,list:"pictureTrackList",prefix:"picture",trackId:"pictureTrack",isTrackDrag:!0})},drag:t.handleTrackPicDragging}},[i("span",{staticClass:"pic-other"},[t._v(t._s(e.title))]),"pictureTrackList"===t.selected.type&&t.selected.index===a?i("div",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"pic-resizable-right"}):t._e()])])})),0)},ae=[],ne={props:{widthRange:{type:Number,default:0},pictureWidth:{type:Number,default:0},trackIndex:{type:Number,default:0},trackList:{type:Array,default:function(){}}},directives:{resize:function(t,e,i){var a=t;a.onmousedown=function(t){var e=t.clientX-a.offsetLeft,n=i.context.$refs["picture"+i.context.selected.index][0];i.context.handleTrackResize(),document.onmousemove=function(t){t.preventDefault();var a=t.clientX-e;if(a<5)return!1;i.context.handleResize(n,a)},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,i.context.handleTrackResize(),i.context.handleResizeEnd()}}}},data:function(){return{}},computed:Object(c["a"])({},Object(g["c"])({selected:function(t){return t.selected},selectedTarget:function(t){return t.selectedTarget},playingPicture:function(t){return t.playingPicture},playingPictureIndex:function(t){return t.playingPictureIndex}})),watch:{trackList:function(t){var e=this;this.$nextTick((function(){var i=t.findIndex((function(t){return t.isSelected}));if(-1!==i){t[i].isSelected=!1;var a=e.$refs["picture"+i][0];e.handleMouseDown(a,i,!1)}}))}},methods:Object(c["a"])(Object(c["a"])({},Object(g["b"])({handlePictureDragEnter:"dragTrackEnter",handlePictureDragEnd:"trackDragEnd",handleTrackPicDragStart:"dragStart",handleTrackPicDragging:"trackDragging",handlePictureDrop:"drop",handleTrackResize:"isTrackResizeInvert"})),{},{handleResize:function(t,e){this.$store.commit("trackBlockResize",{element:t,newWidth:e,list:"pictureTrackList",prefix:"picture",vm:this})},handleResizeEnd:function(){this.$store.commit("getList")},handlePictureDragOver:function(t){this.$store.commit("dragTrackOver",{e:t,vm:this})},handleClick:function(t,e){var i=t;t.target&&"pic-clip"===t.target.className||(i=this.$refs["picture"+e][0]),this.$emit("click-picture",i,e,this.trackIndex,"pictureTrackList","pictureTab","picture")},handleMouseDown:function(t,e,i){var a=t;t.target&&"pic-clip"===t.target.className||(a=this.$refs["picture"+e][0]),this.$emit("mousedown-picture",a,e,this.trackIndex,"picture",i)}})},re=ne,se=(i("5e07"),Object(T["a"])(re,ie,ae,!1,null,"93ddc8ae",null)),oe=se.exports,ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isTextLoading,expression:"isTextLoading"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.activeName,expression:"activeName !== 'text'"}],staticClass:"picture-container"},[i("div",t._l(t.firstCategoryList,(function(e){return i("div",{key:e.id,class:{"category-style":!0,"category-active":t.firstCategory.categoryId===e.categoryId},on:{click:function(i){return t.handleSecondCategorySearch(e)}}},[t._v(t._s(e.categoryName))])})),0),i("div",t._l(t.secondCategoryList,(function(e){return i("div",{key:e.id,class:{"category-style":!0,"category-active":t.secondCategory.categoryId===e.categoryId},on:{click:function(i){return t.handlePictureSearch(e)}}},[t._v(t._s(e.categoryName))])})),0),t.isEmpty?i("div",{staticClass:"picture-empty"},[i("span",[t._v("暂无")])]):i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handlePictureMore,expression:"handlePictureMore"}],staticClass:"picture-list",staticStyle:{"overflow-y":"scroll"},attrs:{"infinite-scroll-delay":300,"infinite-scroll-distance":10}},t._l(t.textList.slice(0,t.picShowAmount),(function(e,a){return i("div",{key:e.picId,staticClass:"picture-style",on:{mouseenter:function(e){t.mouseTarget=a},mouseleave:function(e){t.mouseTarget=null},mousedown:function(e){return t.judgePictureDraggable()}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.mouseTarget===a,expression:"mouseTarget === index"}],staticClass:"el-icon-circle-plus-outline picture-plus-icon",attrs:{title:"添加"},on:{click:function(i){return t.handleTextIconAdd(e)}}}),i("div",{staticClass:"text-list",style:{fontFamily:e.fontFile,fontSize:e.fontSize/4<14?"14px":e.fontSize/4+"px",fontWeight:e.bold?600:400,fontStyle:e.italic?"italic":"normal",color:e.fontColor,textAlign:e.alignment,letterSpacing:e.wordSpacing,opacity:e.transparency,border:e.frame?"solid 1px #FFFFFF":"none",textShadow:e.shadowY?"0px 1.5px #000000":"none",textDecoration:e.underLine?"underline":"none",transform:"rotate("+e.fontWhirl+")"},attrs:{draggable:0!==t.materialTrackList.length},on:{dragstart:function(i){return t.handleTextDragStart({e:i,item:e,index:a,list:"textTrackList",prefix:"text",trackId:"textTrack",isTrackDrag:!1})},drag:t.handleTextDragging,dragend:t.handleTextDragEnd}},[i("span",[t._v(t._s(e.text))])])])})),0)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"text"===t.activeName,expression:"activeName === 'text'"}],staticClass:"text-operation"},[t._l(t.typeList,(function(e){return i("div",{key:e.id,class:{"category-style":!0,"category-active":t.typeIndex===e.id},on:{click:function(i){t.typeIndex=e.id}}},[t._v(" "+t._s(e.name))])})),0===t.typeIndex?i("div",{staticClass:"operation-container"},[i("div",{staticClass:"first-row-container"},[i("div",{staticClass:"first-row"},[i("span",[t._v("字体")]),i("el-select",{staticClass:"long-select",attrs:{filterable:"","default-first-option":""},on:{change:t.handleFontFamilyChange},model:{value:t.fontFile,callback:function(e){t.fontFile=e},expression:"fontFile"}},t._l(t.fontFileList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1),i("div",{staticClass:"first-row"},[i("span",[t._v("字号")]),i("el-select",{staticClass:"select-style",attrs:{"default-first-option":""},on:{change:t.handleFontSizeChange},model:{value:t.fontSize,callback:function(e){t.fontSize=e},expression:"fontSize"}},t._l(95,(function(t){return i("el-option",{key:t,attrs:{label:2*t+10,value:2*t+10}})})),1)],1),i("div",{staticClass:"first-row"},[i("span",[t._v("字体颜色")]),i("el-input",{staticClass:"color-input",model:{value:t.fontColor,callback:function(e){t.fontColor=e},expression:"fontColor"}},[i("el-color-picker",{staticClass:"color-picker",attrs:{slot:"append",size:"mini","color-format":"hex"},on:{change:t.handleFontColorClear,"active-change":t.handleFontColorChange},slot:"append",model:{value:t.fontColor,callback:function(e){t.fontColor=e},expression:"fontColor"}})],1)],1)]),i("div",{staticClass:"font-style-container"},[i("span",[t._v("文本样式")]),t._l(t.fontStyleList,(function(e,a){return i("i",{key:e.name,staticClass:"font-style-style",class:e.className,style:{color:t.getIsActive(e)||t.overIndex===a?"#26CB51":"#707070"},on:{mouseover:function(e){t.overIndex=a},mouseout:function(e){t.overIndex=null},click:function(i){return t.handleFontStyleChange(e)}}})}))],2),i("div",[i("span",[t._v("字间距")]),i("el-slider",{staticClass:"operation-area",attrs:{"show-input":!0,"show-tooltip":!1,min:0,max:300,step:1},model:{value:t.letterSpacing,callback:function(e){t.letterSpacing=e},expression:"letterSpacing"}})],1),i("div",[i("span",[t._v("行间距")]),i("el-slider",{staticClass:"operation-area",attrs:{"show-input":!0,"show-tooltip":!1,min:0,max:300,step:100},model:{value:t.lineHeight,callback:function(e){t.lineHeight=e},expression:"lineHeight"}})],1),i("div",[i("span",[t._v("透明度")]),i("el-slider",{staticClass:"operation-area",attrs:{"show-input":!0,"show-tooltip":!1,min:0,max:1,step:.1},model:{value:t.opacity,callback:function(e){t.opacity=e},expression:"opacity"}})],1)]):t._e()],2)])},le=[],de=(i("b680"),{props:{isEdit:{type:Boolean,default:!1}},data:function(){return{mouseTarget:{},firstCategoryList:[],secondCategoryList:[],typeList:[{name:"文字",id:0}],textList:[{wordSpacing:0,borderW:!1,bold:!0,rows:10,italic:!1,lineSpacing:1,fontFile:"sans-serif",whirl:0,shadowY:!1,transparency:"1",underLine:!1,fontSize:64,page:1,text:"标题",alignment:"center",fontColor:"#FFFFFF",frame:!1},{wordSpacing:0,borderW:!1,bold:!1,rows:10,italic:!1,lineSpacing:1,fontFile:"sans-serif",whirl:0,shadowY:!1,transparency:"1",underLine:!1,fontSize:50,page:1,text:"副标题",alignment:"center",fontColor:"#FFFFFF",frame:!1},{wordSpacing:0,borderW:!1,bold:!1,rows:10,italic:!1,lineSpacing:1,fontFile:"cursive",whirl:0,shadowY:!1,transparency:"1",underLine:!1,fontSize:24,page:1,text:"字幕",alignment:"center",fontColor:"#FFFFFF",frame:!1}],fontStyleList:[{name:"bold",styleName:"fontWeight",value:600,originValue:400,className:"iconfont icon-jiacu"},{name:"underLine",styleName:"textDecoration",value:"underline",originValue:"none",className:"iconfont icon-xiahuaxian"},{name:"italic",styleName:"fontStyle",value:"italic",originValue:"normal",className:"iconfont icon-xieti"},{name:"left",styleName:"textAlign",className:"iconfont icon-juzuoduiqi"},{name:"center",styleName:"textAlign",className:"iconfont icon-juzhongduiqi"},{name:"right",styleName:"textAlign",className:"iconfont icon-juyouduiqi"},{name:"borderW",styleName:"webkitTextStroke",value:"1px #000000",originValue:"0px",className:"iconfont icon-miaobian enlarge-icon"},{name:"shadowY",styleName:"textShadow",value:"0px 1.5px #000000",originValue:"none",className:"iconfont icon-yinying enlarge-icon"}],overIndex:null,isEmpty:!1,isTextLoading:!1,picShowAmount:20,typeIndex:0,loadingImage:i("43f9"),fontFileList:[],fontFile:null,fontSize:null,fontColor:"#FFFFFF",letterSpacing:0,lineHeight:100,opacity:1}},computed:Object(c["a"])({},Object(g["c"])({activeName:function(t){return t.activeName},selected:function(t){return t.selected},selectedTarget:function(t){return t.selectedTarget},materialTrackList:function(t){return t.materialTrackList},textTrackList:function(t){return t.textTrackList}})),watch:{selectedTarget:function(t){if("text"!==this.activeName)return!0;this.initTab(t)},letterSpacing:function(t){this.isEdit&&this.$emit("stop-edit",this.selected.trackIndex),this.letterSpacing=1*t.toFixed(0),this.$store.commit("drrTabFontStyle",{styleName:"letterSpacing",styleValue:this.letterSpacing,name:"wordSpacing",value:t,isOnly:!0})},lineHeight:function(t){this.isEdit&&this.$emit("stop-edit",this.selected.trackIndex);var e=1*(t/100).toFixed(0);this.lineHeight=100*e,this.$store.commit("drrTabFontStyle",{styleName:"lineHeight",styleValue:this.lineHeight/100,name:"lineSpacing",value:t/100,isOnly:!0})},opacity:function(t){this.isEdit&&this.$emit("stop-edit",this.selected.trackIndex),this.$store.commit("drrTabFontStyle",{styleName:"opacity",styleValue:t,name:"transparency",value:t,isOnly:!0})}},methods:Object(c["a"])(Object(c["a"])({},Object(g["b"])({handleTextDragStart:"dragStart",handleTextDragging:"tabDragging",handleTextDragEnd:"tabDragEnd"})),{},{handleSecondCategorySearch:function(){},handlePictureSearch:function(){},handlePictureMore:function(){},judgePictureDraggable:function(){return 0!==this.materialTrackList.length||(this.$message({type:"warning",message:"视频轨道为空，请添加视频素材后再试"}),!1)},handleTextIconAdd:function(t){if(0===this.materialTrackList.length)return!1;this.$emit("icon-add","text",t)},handleFontFamilyChange:function(t){this.isEdit&&this.$emit("stop-edit",this.selected.trackIndex),this.$store.commit("drrTabFontStyle",{styleName:"fontFamily",styleValue:t,name:"fontFile",value:t,isOnly:!0})},handleFontSizeChange:function(t){this.isEdit&&this.$emit("stop-edit",this.selected.trackIndex),this.$store.commit("drrTabFontOperation",{styleName:"fontSize",styleValue:t,isNeedPx:!0})},handleFontColorClear:function(t){null===t&&this.handleFontColorChange("rgb(255, 255, 255)")},handleFontColorChange:function(t){this.isEdit&&this.$emit("stop-edit",this.selected.trackIndex),this.fontColor=h(t),this.$store.commit("drrTabFontStyle",{styleName:"color",styleValue:this.fontColor,name:"fontColor",value:this.fontColor,isOnly:!0})},handleFontStyleChange:function(t){switch(t.styleName){case"textAlign":this.handleTextAlign(t);break;default:this.handleBooleanStyle(t)}},handleTextAlign:function(t){var e=this.selectedTarget["alignment"]===t.name,i=e?"left":t.name;this.$store.commit("drrTabFontStyle",{styleName:t.styleName,styleValue:i,name:"alignment",value:i})},handleBooleanStyle:function(t){var e=this.selectedTarget[t.name],i=e?t.originValue:t.value;this.$store.commit("drrTabFontStyle",{styleName:t.styleName,styleValue:i,name:t.name,value:!e})},getIsActive:function(t){return"textAlign"===t.styleName?this.selectedTarget["alignment"]===t.name:this.selectedTarget[t.name]},initTab:function(t){this.fontFile=t.fontFile,this.fontSize=t.fontSize,this.fontColor=t.fontColor||"#000000",this.letterSpacing=t.wordSpacing,this.lineHeight=100*t.lineSpacing,this.opacity=t.transparency||1}}),created:function(){var t=this;this.$nextTick((function(){"text"===t.activeName&&t.initTab(t.selectedTarget)}))}}),ue=de,he=(i("605b"),Object(T["a"])(ue,ce,le,!1,null,"1c2a8e4d",null)),me=he.exports,pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"textTrack",attrs:{id:"textTrack"+t.trackIndex},on:{dragenter:t.handleTextDragEnter,dragover:t.handleTextDragOver,dragend:t.handleTextDragEnd,drop:t.handleTextDrop}},t._l(t.trackList,(function(e,a){return i("div",{key:e.seq+""+a,staticClass:"text-container"},[i("div",{ref:"text"+a,refInFor:!0,staticClass:"text-clip",attrs:{id:"text"+a,draggable:!0},on:{click:function(e){return t.handleClick(e,a)},mousedown:function(e){return t.handleMouseDown(e,a,!0)},dragstart:function(i){return t.handleTextDragStart({e:i,item:e,index:a,trackIndex:t.trackIndex,list:"textTrackList",prefix:"text",trackId:"textTrack",isTrackDrag:!0})},drag:t.handleTrackTextDragging}},[i("span",{staticClass:"pic-other"},[t._v(t._s(e.text))]),"textTrackList"===t.selected.type&&t.selected.index===a?i("div",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"pic-resizable-right"}):t._e()])])})),0)},ge=[],fe={props:{trackIndex:{type:Number,default:0},trackList:{type:Array,default:function(){}}},directives:{resize:function(t,e,i){var a=t;a.onmousedown=function(t){var e=t.clientX-a.offsetLeft,n=i.context.$refs["text"+i.context.selected.index][0];i.context.handleTrackResize(),document.onmousemove=function(t){t.preventDefault();var a=t.clientX-e;if(a<5)return!1;i.context.handleResize(n,a)},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,i.context.handleTrackResize(),i.context.handleResizeEnd()}}}},data:function(){return{}},computed:Object(c["a"])({},Object(g["c"])({selected:function(t){return t.selected},isTextActive:function(t){return t.isTextActive}})),watch:{trackList:function(t){var e=this;this.$nextTick((function(){var i=t.findIndex((function(t){return t.isSelected}));if(-1!==i){t[i].isSelected=!1;var a=e.$refs["text"+i][0];e.handleMouseDown(a,i,!1)}}))}},methods:Object(c["a"])(Object(c["a"])({},Object(g["b"])({handleTextDragEnter:"dragTrackEnter",handleTextDragEnd:"trackDragEnd",handleTextDragStart:"dragStart",handleTrackTextDragging:"trackDragging",handleTextDrop:"drop",handleTrackResize:"isTrackResizeInvert"})),{},{handleTextDragOver:function(t){this.$store.commit("dragTrackOver",{e:t,vm:this})},handleResize:function(t,e){this.$store.commit("trackBlockResize",{element:t,newWidth:e,list:"textTrackList",prefix:"text",vm:this})},handleResizeEnd:function(){this.$store.commit("getList")},handleClick:function(t,e){var i=t;t.target&&"text-clip"===t.target.className||(i=this.$refs["text"+e][0]),this.$emit("click-text",i,e,this.trackIndex,"textTrackList","textTab","text")},handleMouseDown:function(t,e,i){var a=t;t.target&&"text-clip"===t.target.className||(a=this.$refs["text"+e][0]),this.$emit("mousedown-text",a,e,this.trackIndex,"text",i)}})},ve=fe,Te=(i("a182"),Object(T["a"])(ve,pe,ge,!1,null,"630e63c4",null)),xe=Te.exports,ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"transition-container"},[i("ul",{staticClass:"type-container",style:{visibility:t.isShowPopover&&t.isShowUl?"visible":"hidden",transform:"translate("+(t.activeIcon.trackStartTime*t.trackScale+t.ulXMove)+"px, -100%)",top:t.ulTop+"px"},attrs:{id:"typeContainer"}},[i("li",[i("span",[t._v("时长 ")]),i("el-input-number",{staticClass:"input-duration",attrs:{size:"mini",controls:!1},on:{change:t.handleDurationChange},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}}),i("span",[t._v(" s")])],1),t._l(t.typeList,(function(e){return i("li",{key:e.id,class:{"li-style":!0,"active-li":t.activeIcon.typeId===e.id},on:{click:function(i){return t.handleTypeSelect(e)}}},[i("span",[t._v(" "+t._s(e.label))]),i("i",{staticClass:"el-icon-check checked-icon",style:{visibility:t.isShowPopover&&t.isShowUl&&t.activeIcon.typeId===e.id?"visible":"hidden"}})])}))],2),t._l(t.transitionList,(function(e,a){return i("div",{key:e.id+""+e.trackStartTime+a,ref:"transtionIcon",refInFor:!0,staticClass:"transition-icon",style:{transform:"translateX("+(e.trackStartTime*t.trackScale-5)+"px)",width:e.zoomTime*t.trackScale+10+"px"},attrs:{id:"icon"+a},on:{click:function(i){return t.handlePopoverShow(e,a)}}},[i("i",{staticClass:"el-icon-more"})])}))],2)},ye=[],be={props:{isSaveOrSubmit:{type:Boolean,default:!1}},data:function(){return{trackScale:j.trackScale,isShowPopover:!1,isShowUl:!1,transitionList:[],typeList:[{id:1,label:"淡入淡出",src:"",transitionName:"displacement",duration:5},{id:2,label:"互换淡入",src:"",transitionName:"swap",duration:9},{id:3,label:"往上擦去",src:"",transitionName:"wipeUp",duration:15},{id:4,label:"往下擦去",src:"",transitionName:"wipeDown",duration:10},{id:5,label:"往左擦去",src:"",transitionName:"wipeLeft",duration:10},{id:6,label:"往右擦去",src:"",transitionName:"wipeRight",duration:10},{id:8,label:"简单缩放",src:"",transitionName:"SimpleZoom",duration:10},{id:9,label:"波纹",src:"",transitionName:"ripple",duration:10},{id:10,label:"燃烧",src:"",transitionName:"burn",duration:10},{id:11,label:"翻页",src:"",transitionName:"InvertedPageCurl",duration:10},{id:12,label:"心形",src:"",transitionName:"heart",duration:10},{id:13,label:"圆形",src:"",transitionName:"CircleCrop",duration:10},{id:7,label:"无效果",src:"",transitionName:"",duration:10}],duration:1,activeIcon:{},activeIconIndex:null,ulTop:0,ulXMove:0,isInitTransition:!1}},computed:Object(c["a"])({},Object(g["c"])({materialTrackList:function(t){return t.materialTrackList}})),watch:{materialTrackList:function(){var t=this;if(this.isInitTransition)return this.isInitTransition=!1,!0;this.$nextTick((function(){t.getTransitionList()}))}},methods:{handleDurationChange:function(){this.duration=Math.floor(this.duration),this.duration>this.activeIcon.maxDuration?(this.activeIcon.zoomTime=this.activeIcon.maxDuration,this.duration=this.activeIcon.maxDuration):this.activeIcon.zoomTime=this.duration,this.activeIcon.playbackRate=this.activeIcon.videoDuration?1*(this.activeIcon.videoDuration/this.activeIcon.zoomTime).toFixed(1):1,this.activeIcon.trackStartTime=Math.floor(this.activeIcon.originStartTime-this.activeIcon.zoomTime/2),this.activeIcon.trackEndTime=Math.floor(this.activeIcon.trackStartTime+this.activeIcon.zoomTime),j.transitionList=this.transitionList,this.handleUlPosition(this.activeIconIndex,this.duration*this.trackScale+10)},handleTypeSelect:function(t){this.activeIcon.transitionName=t.transitionName,this.activeIcon.typeId=t.id,this.activeIcon.videoDuration=t.duration,this.activeIcon.playbackRate=1*(this.activeIcon.videoDuration/this.activeIcon.zoomTime).toFixed(1),this.handleIconColor(t,this.activeIconIndex,this.activeIconIndex+1,!1),j.transitionList=this.transitionList},handlePopoverShow:function(t,e){this.handleUlPosition(e,t.zoomTime*this.trackScale+10),this.activeIcon=t,this.activeIconIndex=e,this.duration=t.zoomTime,this.activeIcon.typeId||(this.activeIcon.typeId=7),this.isShowUl=!0},handleUlPosition:function(t,e){var i=document.querySelector(".clip-resource").scrollLeft,a=this.$refs.transtionIcon[t],n=a.getBoundingClientRect().top,r=document.getElementById("typeContainer"),s=r.getBoundingClientRect().width;this.ulXMove=e/2-s/2-5-i,this.ulTop=n-25,r.style.transform="translate("+(this.activeIcon.trackStartTime*this.trackScale+this.ulXMove)+"px, -100%)"},handleIconColor:function(t,e,i,a){for(var n=e;n<i;n++){var r=a?t[n]:t,s=document.getElementById("icon"+n);s&&(s.style.color=7!==r.typeId?"#26CB51":"#606266")}},getTransitionList:function(){var t=this.materialTrackList.reduce((function(t,e,i,a){if(a[i+1]&&a[i].trackEndTime===a[i+1].trackStartTime){var n=a[i].trackEndTime-a[i].trackStartTime,r=a[i+1].trackEndTime-a[i+1].trackStartTime,s=n<r?n:r,o=s/2>1?1:s/2,c={id:e.id?e.id:e.rlsId,trackStartTime:e.trackEndTime-o/2,trackEndTime:e.trackEndTime-o/2+1,originStartTime:e.trackEndTime,maxDuration:Math.floor(s-1),typeId:7,playbackRate:1,zoomTime:Math.floor(o),transitionName:"",position:t.length?t.length+1:1,beforeTime:Math.floor(n),afterTime:Math.floor(r)};t.push(c)}return t}),[]);this.transitionList=t,this.handleIconColor(t,0,t.length,!0),j.transitionList=this.transitionList},initTransition:function(t){var e=this;this.isInitTransition=!0,this.transitionList=t,j.transitionList=this.transitionList,this.$nextTick((function(){e.handleIconColor(t,0,t.length,!0)}))},clickMonitor:function(t){if(this.isSaveOrSubmit)return!0;for(var e=t.path,i=!1,a=0;a<5;a++)if("typeContainer"===e[a].id||"transition-icon"===e[a].className){i=!0;break}i?this.isShowPopover=!0:(this.isShowPopover=!1,this.isShowUl=!1)},scrollMonitor:function(){this.isShowPopover&&(this.isShowPopover=!1,this.isShowUl=!1)}},mounted:function(){window.addEventListener("mousedown",this.clickMonitor),document.querySelector(".clip-resource").addEventListener("scroll",this.scrollMonitor)},beforeDestroy:function(){window.removeEventListener("mousedown",this.clickMonitor)}},Ae=be,Ie=(i("4102"),Object(T["a"])(Ae,ke,ye,!1,null,"fe1b250c",null)),Se=Ie.exports,we=[{element:"#materialArea",popover:{title:"标签页区域",description:"用于展示所有可添加到轨道的各类素材。",position:"right"}},{element:"#materialItem",popover:{title:"添加到轨道方式",description:"鼠标选择并拖拽到对应轨道位置添加 或 点击各素材右上角图标自动添加。",position:"right"}},{element:"#videoArea",popover:{title:"视频播放区域",description:"用于 显示指针所在帧画面 及 操作DRR。",position:"left"}},{element:"#buttonArea",popover:{title:"操作按钮区域",description:"用于展示功能性操作按钮。",position:"top-center"}},{element:"#deleteIcon",popover:{title:"删除按钮",description:"点击可对选中的 轨道块 进行删除操作。",position:"bottom"}},{element:"#clipIcon",popover:{title:"裁剪按钮",description:"点击可对选中的 视频轨道块 进行裁剪操作。",position:"bottom"}},{element:"#submitButton",popover:{title:"提交按钮",description:"点击可打开提交弹窗，弹窗内提供视频的最终效果预览 及 视频相关信息填写。"}},{element:"#tracksArea",popover:{title:"轨道区域",description:"展示所有可操作的轨道块。",position:"top-center"}},{element:"#multiTracksItem",popover:{title:"多轨道支持",description:"该类型轨道支持多轨道化，鼠标悬停即可显示对应操作区域。",position:"right"}}],Ce=we,Le={components:{TimeAxis:k,Pointer:Y,SubmitClip:Tt,TempMessage:At,MultiTracksUl:Dt,MaterialTab:Xt,MaterialTrack:Ht,PictureTab:ee,PictureTrack:oe,TextTab:me,TextTrack:xe,TransitionTrack:Se,PictureDrr:it,TextDrr:ct},data:function(){return{isClipLoading:!1,onlineTab:"materialTab",tempTabName:"materialTab",isShowMaterialAdd:!1,videoInfo:{editId:"",videoTitle:"",businessType:"",categoryId:"",categoryName:"",tag:[],picH:"",picV:"",fileId:"",define:"1080P",status:"",videoType:0,submitTime:"",createdTime:"",modifyTime:"",url:"",userId:"",duration:0,productType:0},videoPlay:!1,controlsIcons:{play:i("df84"),pause:i("88ae")},banClip:!1,isLimit:!1,trackCurrentTime:"00:00:00",trackDurationString:"00:00:00",sliderData:0,videoSrc:"",videoTarget:void 0,duration:0,realLeft:0,isInputting:!1,isSaveOrSubmit:!1,saveOrSubmit:0,titleHeight:70,canvasWidth:100,canvasVideo:null,canvasVideo2:null,canvasTimer:null,tempTransitionList:[],videoFrame:{width:null,height:null},keyCode:null,isLoadingVideo:!1,isShowUl:!1,showUlIndex:null,ulText:null,ulName:null,isTextEdit:!1,clipResource:null,oldPictureIndex:null,iconWidth:0,playingIndex:null}},computed:Object(c["a"])(Object(c["a"])({},Object(g["c"])({trackScale:function(t){return t.trackScale},defaultMaterialHeight:function(t){return t.defaultMaterialHeight},materialTrackWidth:function(t){return t.materialTrackWidth},trackDuration:function(t){return t.trackDuration},timeAxisDuration:function(t){return t.timeAxisDuration},pointerLeft:function(t){return t.pointerLeft},pointerDuration:function(t){return t.pointerDuration},operationIndex:function(t){return t.operationIndex},activeName:function(t){return t.activeName},operationName:function(t){return t.operationName},selected:function(t){return t.selected},selectedTarget:function(t){return t.selectedTarget},playingMaterial:function(t){return t.playingMaterial},playingPicture:function(t){return t.playingPicture},playingPictureIndex:function(t){return t.playingPictureIndex},playingText:function(t){return t.playingText},playingTextIndex:function(t){return t.playingTextIndex},playingTransition:function(t){return t.playingTransition},materialTrackList:function(t){return t.materialTrackList},pictureTrackList:function(t){return t.pictureTrackList},textTrackList:function(t){return t.textTrackList}})),{},{reversePictureList:function(){return JSON.parse(JSON.stringify(this.pictureTrackList)).reverse()},reverseTextList:function(){return JSON.parse(JSON.stringify(this.textTrackList)).reverse()}}),watch:{trackDuration:function(t){this.trackDurationString=u(t)},activeName:function(t){t?(this.tempTabName=this.onlineTab,this.onlineTab=t+"Tab"):this.onlineTab=this.tempTabName},pointerDuration:function(t){var e=this.selectedTarget;return!!e&&("materialTrackList"!==this.selected.type?(this.banClip=!0,!1):(t<=e.trackStartTime||t>=e.trackEndTime?this.banClip=!0:this.banClip=!1,void(this.videoTarget.paused&&this.videoPlay&&this.handleVideoPlay())))},selectedTarget:function(t){if(!t)return!1;if("materialTrackList"!==this.selected.type)return this.banClip=!0,!0;var e=this.pointerDuration;e<=t.trackStartTime||e>=t.trackEndTime?this.banClip=!0:this.banClip=!1},playingPicture:function(t){if(this.oldPictureIndex===this.playingPictureIndex[0])return!0;t[0]&&"video"===t[0].fileType&&(this.videoPlay?this.playVideoPicture(t[0],!0):this.playVideoPicture(t[0],!1))},playingTransition:function(){}},methods:{handleOnclipClose:function(){},handleVideoDataSet:function(t,e){this.videoSrc=t,this.videoTarget.currentTime=e},handleSelectedClick:function(t,e,i,a){var n="materialTrackList"===i?this.materialTrackList:void 0;this.$store.dispatch("setTrackBlockSelect",{e:t,index:e,trackIndex:a,list:i,realList:n,vm:this})},handleShowMaterialDialog:function(){this.videoPlay&&this.handleVideoPause(),this.isShowMaterialAdd=!0},handleVideoPlayOrPause:function(){this.videoPlay?this.handleVideoPause():this.handleVideoPlay()},handleVideoPlay:function(){var t=this;return this.materialTrackList.length?!this.isLoadingVideo&&void setTimeout((function(){t.videoTarget.src&&(t.videoPlay=!0,t.videoTarget.play());var e=t.$refs.pictureDrr[0].$refs.drrTarget?t.$refs.pictureDrr[0].$refs.drrTarget[0]:null;e&&"video"===t.playingPicture[0].fileType&&(e.currentTime=t.pointerDuration-t.playingPicture[0].trackStartTime,e.play())}),150):(this.$message({type:"warning",message:"视频轨道为空，请添加素材至轨道后再尝试播放"}),!1)},handleVideoPause:function(){this.videoPlay=!1,this.videoTarget.src&&this.videoTarget.pause();var t=this.$refs.pictureDrr[0].$refs.drrTarget?this.$refs.pictureDrr[0].$refs.drrTarget[0]:null;t&&"video"===this.playingPicture[0].fileType&&(this.oldPictureIndex=null,t.pause())},handleTextEdidState:function(t){this.isTextEdit=t},handleAlertClose:function(){this.$notify({type:"success",dangerouslyUseHTMLString:!0,message:'消息可在左上角 <i class="el-icon-question"></i> 中重新查看哦'})},handleSaveOrSubmit:function(t){this.videoPlay&&this.handleVideoPause(),this.materialTrackList.length?(this.isSaveOrSubmit=!0,this.saveOrSubmit=t):this.$message({type:"warning",message:"轨道无素材, 请选取素材进行操作再保存或提交"})},handleIconHover:function(t,e,i){this.showUlIndex=t,this.ulText=e,this.ulName=i,this.isShowUl=!0},handleMediaClip:function(){if(0===this.materialTrackList.length||this.banClip||this.videoPlay)return!1;this.realLeft=(this.pointerDuration-this.selectedTarget.trackStartTime)*this.trackScale,this.beginMediaClip(),this.finishMediaClip()},handleMediaDelete:function(){if(this.videoPlay&&this.handleVideoPause(),0===this.materialTrackList.length)return!1;for(var t=this.selected.index,e=this.selected.width,i=this.getDurationByWidth(e),a=this.materialTrackList,n=t;n<this.materialTrackList.length-1;n++){var r=document.getElementById("clip"+(n+1)),s=document.getElementById("clip"+n);s.style="\n          width: ".concat(r.style.width,";\n          height: ").concat(r.style.height,";\n          background-image: ").concat(r.style.backgroundImage,";\n          background-size: auto 100%\n        "),this.$store.commit("updateMateriaTime",{duration:i,index:n+1,operator:0})}if(this.$store.commit("updateArrayDelete",{name:"materialTrackList",index:t,amount:1}),0===this.materialTrackList.length)this.updatePointerData(0,!1),this.$store.commit("clearSelected"),this.$store.commit("updatePlayingTarget",{target:"playingMaterial",value:{},index:void 0}),this.videoSrc="",this.canvasVideo.width=2*this.videoFrame.width,this.isLoadingVideo=!1;else{var o=a[t-1]||a[t],c=a[a.length-1],l=t>0?t-1:t,d=document.getElementById("clip"+(t-1))||document.getElementById("clip"+t);this.videoSrc=o.playUrl,this.videoTarget.currentTime=o.endTime,this.handleSelectedClick(d,l,"materialTrackList"),this.pointerDuration>c.trackEndTime&&this.updatePointerData(c.trackEndTime,!1),this.$refs.pointer.judgePlayingTarget()}this.$store.commit("updateValue",{name:"materialTrackWidth",value:this.materialTrackWidth-e})},handleSubmitClose:function(){this.isSaveOrSubmit=!1},handleAllClose:function(){this.isSaveOrSubmit=!1,this.$store.commit("clearAll"),this.$emit("save-close-refresh",this.saveOrSubmit)},handleTrackMouseDown:function(t,e,i,a,n){this.videoPlay&&this.handleVideoPause(),n&&this.$refs[a+"Drr"][i].handleActive(e,!0),this.handleSelectedClick(t,e,a+"TrackList",i)},handleTrackClick:function(t,e,i,a,n,r){var s=this;this.videoPlay&&this.handleVideoPause();var o=this[a][i][e];this.onlineTab=n,this.$nextTick((function(){if(o.trackStartTime>=s.trackDuration)s.$store.commit("updateValue",{name:"activeName",value:null}),s.handleSelectedClick(t,e,a,i);else{var n=o.trackStartTime+o.realRange/s.trackScale/2;n>s.trackDuration&&(n=s.trackDuration),s.handleSelectedClick(t,e,a,i),s.updatePointerData(n,!1),s.$refs.pointer.judgePlayingTarget(),s.$store.commit("updateValue",{name:"activeName",value:r})}}))},handleIconAdd:function(t,e){var i=this,a=t,n=t+"TrackList",r="playing"+t.slice(0,1).toUpperCase()+t.slice(1),s={name:a,list:n};this.$refs.pointer.judgePlaying(s);var o=Object.assign({},e);o.duration||(o.duration=this.trackScale),o.positionXBegin=this[r][0]&&this[r][0].positionXEnd?this[r][0].positionXEnd:this.pointerLeft,o.positionXEnd=o.positionXBegin+o.duration*this.trackScale;var c=this[r+"Index"][0];if(!this[r][0]||!this[r][0].positionXEnd){var l=this[n][0].reduce((function(t,e,a){return i.pointerLeft>=e.positionXEnd&&(t=a),t}),-1);c=l}this.$store.commit("tabDragAdd",{target:o,index:c,targetTrackIndex:0,list:n,prefix:t,trackId:t+"Track",iconAdd:!0,vm:this})},handleCancelEdit:function(t){this.$refs.textDrr[t].handleDrrTextEditEnd()},beginMediaClip:function(){var t=this.selected,e=Object(c["a"])({},this.selectedTarget),i=this.realLeft,a=t.index,n=this.materialTrackList[t.index],r=e.startTime+this.getDurationByWidth(i);this.$store.commit("updateArrayObjectAttr",{name:"materialTrackList",index:a,attr:"trackEndTime",value:this.pointerDuration}),this.$store.commit("updateArrayObjectAttr",{name:"materialTrackList",index:a,attr:"endTime",value:r});var s=Object(c["a"])(Object(c["a"])({},e),{},{trackStartTime:n.trackEndTime,startTime:n.endTime});this.updatePointerData(s.trackStartTime,!1),this.$store.commit("updateArrayAdd",{name:"materialTrackList",index:t.index+1,value:s})},finishMediaClip:function(){var t=this,e=this.selected.index,i=document.getElementById("clip"+e);i.style.width=this.realLeft+"px",this.$nextTick((function(){for(var i=t.materialTrackList.length-1;i>e+1;i--){var a=document.getElementById("clip"+(i-1)),n=document.getElementById("clip"+i);n.style="\n            width: ".concat(a.style.width,";\n            height: ").concat(a.style.height,";\n            background-image: ").concat(a.style.backgroundImage,";\n            background-size: auto 100%\n          ")}var r=document.getElementById("clip"+(e+1));r.style="\n          width: ".concat(t.selected.width-t.realLeft,"px;\n          height: ").concat(t.defaultMaterialHeight,"px;\n          background-image: ").concat(t.selected.dataURL,";\n          background-size: auto 100%;\n        "),t.handleSelectedClick(r,e+1,"materialTrackList"),t.$refs.pointer.judgePlayingTarget()}))},setPointerAndTrack:function(t,e){this.$store.commit("updatePointer",{pointerLeft:t,pointerDuration:e}),this.trackCurrentTime=u(e),0===t&&this.judgeVideoSource(this.materialTrackList[0],0)},judgeVideoSource:function(t,e){if(this.playingIndex=e,!t)return this.videoSrc="",!1;var i=Object.assign({},this.playingMaterial),a=this.pointerDuration-t.trackStartTime;if(this.$store.commit("updatePlayingTarget",{target:"playingMaterial",value:t,index:void 0}),!this.videoPlay)return this.videoSrc=t.playUrl,this.videoTarget.src=t.playUrl,this.videoTarget.currentTime=t.startTime+a,this.drawCanvasVideoCover(t.startTime+a),1;var n=t.playUrl!==i.playUrl;n&&(this.videoSrc=t.playUrl,this.videoTarget.src=t.playUrl,this.videoTarget.currentTime=t.startTime+a,this.handleVideoPlay());var r=t.playUrl===i.playUrl&&t.trackStartTime!==i.trackStartTime;r&&(this.videoTarget.currentTime=t.startTime+a)},judgePictureSource:function(t,e){var i=this.playingPicture[0];if(i){var a=t[0]&&t[0].title===i.title&&t[0].trackStartTime===i.trackStartTime;!this.videoPlay&&a&&this.playVideoPicture(t[0],!1)}this.judgePlayingChange("playingPictureIndex",e)||(this.$store.commit("updateValue",{name:"activeName",value:null}),this.$store.commit("updatePlayingTarget",{target:"playingPicture",value:t,index:e}))},judgeTextSource:function(t,e){this.judgePlayingChange("playingTextIndex",e)||(this.$store.commit("updateValue",{name:"activeName",value:null}),this.$store.commit("updatePlayingTarget",{target:"playingText",value:t,index:e}))},judgeTransitionSource:function(t){this.$store.commit("updatePlayingTarget",{target:"playingTransition",value:t,index:void 0})},judgePlayingChange:function(t,e){return JSON.stringify(this[t])===JSON.stringify(e)},playVideoPicture:function(t,e){var i=this;this.$nextTick((function(){var a=i.$refs.pictureDrr[0].$refs.drrTarget[0];a.currentTime=i.pointerDuration-t.trackStartTime,i.$store.commit("drrElementData",{way:!1,index:i.playingPictureIndex[0],playingName:"playingPicture",vm:i.$refs.pictureDrr[0]}),e&&setTimeout((function(){i.videoPlay&&a.play()}),150)}))},changePointerStart:function(t){this.handleVideoPause(),this.updatePointerData(t,!1),this.$refs.pointer.judgePlayingTarget()},getUlTop:function(){var t=0;switch(this.ulName){case"text":break;case"picture":t=this.textTrackList.length;break;case"material":t=this.textTrackList.length+this.pictureTrackList.length;break;case"music":t=this.textTrackList.length+this.pictureTrackList.length+this.materialTrackList.length;break}return 40*(this.showUlIndex+t)},getDurationByWidth:function(t){return t/this.trackScale},getReverseIndex:function(t,e){return e-1+t+-2*t},updatePointerData:function(t,e){var i=t;t<0&&(i=0);var a=i*this.trackScale;this.trackCurrentTime=u(i),this.$store.commit("updatePointer",{pointerLeft:a,pointerDuration:i}),e?this.$refs.pointer.moveWhenVideoPlay(i):this.$refs.pointer.changePointerLeft(a)},initTrack:function(){var t=this;this.$nextTick((function(){for(var e=t.materialTrackList.length,i=t.materialTrackList,a=0;a<e;a++){var n=document.querySelector("#clip"+a),r=i[a].trackEndTime-i[a].trackStartTime;n.style="\n            width: ".concat(r*t.trackScale,"px;\n            height: ").concat(t.defaultMaterialHeight,"px;\n            left: ").concat(i[a].trackStartTime*t.trackScale,"px;\n            background-image: url(").concat(i[a].cover,");\n            background-size: auto 100%;\n          ")}t.videoSrc=i[0].playUrl,t.videoTarget.currentTime=i[0].startTime,t.$store.commit("updateValue",{name:"materialTrackWidth",value:t.materialTrackWidth+i[e-1].trackEndTime*t.trackScale}),t.handleSelectedClick(document.querySelector("#clip0"),0,"materialTrackList")}))},videoTimeUpdateMonitor:function(t){var e=t.target;if(!this.videoPlay)return!1;this.$refs.pointer.judgePlayingTarget();var i=this.playingMaterial.trackStartTime,a=this.playingMaterial.startTime,n=this.materialTrackList[this.materialTrackList.length-1];e.currentTime<a&&(e.currentTime=a);var r=e.currentTime+i-a,s=Math.round(r)>=Math.round(n.trackEndTime);s?(this.realLeft=0,this.updatePointerData(r,!0),this.updatePointerData(0,!0),e.currentTime=a,setTimeout((function(){e.play()}),150)):(this.realLeft=(this.pointerDuration-i)*this.trackScale,this.updatePointerData(r,!0))},keyUpMonitor:function(t){this.keyCode=null;var e=46===t.keyCode||8===t.keyCode;if(e&&!this.isInputting&&!this.isTextEdit&&!this.isSaveOrSubmit&&!this.isShowMaterialAdd)switch(this.selected.type){case"materialTrackList":this.handleMediaDelete();break;case"pictureTrackList":this.$store.commit("updateValue",{name:"activeName",value:null}),this.$store.commit("trackBlockDelete",{trackId:"pictureTrack",prefix:"picture",vm:this});break;case"textTrackList":this.$store.commit("updateValue",{name:"activeName",value:null}),this.$store.commit("trackBlockDelete",{trackId:"textTrack",prefix:"text",vm:this});break}32!==t.keyCode||this.isTextEdit||this.isSaveOrSubmit||this.isShowMaterialAdd||this.handleVideoPlayOrPause()},keyDownMonitor:function(t){this.keyCode=t.keyCode,32===t.keyCode&&t.preventDefault()},mouseDownMonitor:function(t){if(this.isSaveOrSubmit||this.isShowMaterialAdd)return!0;this.isInputting=!1;var e="INPUT"===t.target.nodeName;e&&(this.isInputting=!0);var i=null,a=null;switch(this.activeName){case"picture":i="pictureDrr",a="picture";break;case"text":i="textDrr",a="text";break}if(!i)return!0;var n=t.clientX,r=t.clientY,s=this.$refs.tabsCol.$el.getBoundingClientRect(),o=n>0&&n<s.width,c=r>this.titleHeight&&r<s.height+s.top+this.titleHeight;if(o&&c||this.isTextEdit){var l=i+this.selected.trackIndex;switch(a){case"picture":this.$refs[i][0].$refs.resizable[0].enabled=!0;break;case"text":var d=this.$refs[i].find((function(t){return t.$el.id===l}));d.$refs.resizable[0].enabled=!0;break}this.$store.commit("updateValue",{name:"activeName",value:a})}else this.$store.commit("updateValue",{name:"activeName",value:null})},windowResizeMonitor:function(){if(this.isSaveOrSubmit)return!0;this.iconWidth=.04*window.innerWidth;var t=this.$refs.videoFrame.clientWidth,e=this.videoFrame.width?t/this.videoFrame.width:t/1280;null===this.videoFrame.width&&this.$store.commit("initProportion",t),this.videoFrame.width=t,this.videoFrame.height=720*t/1280,this.$refs.videoFrame.style.height=this.videoFrame.height+"px",this.$store.commit("updateDrrResolution",{proportion:e,width:t,vm:this})},axisYScrollMonitor:function(t){var e=t.target.scrollTop,i=40*(this.textTrackList.length+this.pictureTrackList.length)+65+40+15;if(e+200>=i)return!1;this.$refs.timeAxis.$el.style.transform="translateY(".concat(e,"px)"),this.$refs.emptyIcon.style.transform="translateY(".concat(e,"px)"),this.$refs.clipResourceIcons.$el.style.transform="translateY(-".concat(e,"px)"),this.$refs.pointer.handlePointerYStatic(e)},stopCanvasVideo:function(){clearInterval(this.canvasTimer)},drawCanvasVideoCover:function(t){var e=this,i=this.canvasVideo,a=this.videoTarget;a.currentTime=t,this.isLoadingVideo=!0,a.oncanplay=function(){i.width=2*e.videoFrame.width,i.height=2*e.videoFrame.height,i.getContext("2d").drawImage(a,0,0,i.width,i.height),e.isLoadingVideo=!1}},drawCanvasVideo:function(){var t=this.canvasVideo,e=this.videoTarget,i=t.getContext("2d");t.width=2*this.videoFrame.width,t.height=2*this.videoFrame.height,this.canvasTimer=setInterval((function(){i.drawImage(e,0,0,t.width,t.height)}),40)},startGuider:function(){this.$driver.defineSteps(Ce),this.$driver.start()}},created:function(){this.isClipLoading=!0;var t=[{rlsId:"",editId:"",seq:"",status:1,id:319183,coocaaMId:"6uh9j6l00400",coocaaVId:"r9mtl000000",thirdMovieId:"o0032tld90n",thirdVideoId:"m441e3rjq9kwpsc",duration:5,frameDuration:5,formattedDuration:"00:00:05",videoTitle:"Firework",playUrl:i("f5f1"),cover:i("43f9"),modifyTime:"2020-12-19 04:53:07",source:"tencent",businessType:0,businessName:"影视",categoryId:2,categoryName:"动漫",startFrame:0,endFrame:5,startTime:0,endTime:5},{rlsId:"",editId:"",seq:"",status:1,id:319185,coocaaMId:"6uh9j6l00402",coocaaVId:"r9mtl000002",thirdMovieId:"o0032tld92n",thirdVideoId:"m441e3rjq7kwpsc",duration:15,frameDuration:15,formattedDuration:"00:00:15",videoTitle:"SunsetGlow",playUrl:i("10d8"),cover:i("43f9"),modifyTime:"2020-12-19 04:53:07",source:"tencent",businessType:0,businessName:"影视",categoryId:2,categoryName:"动漫",startFrame:0,endFrame:15,startTime:0,endTime:15},{rlsId:"",editId:"",seq:"",status:1,id:319184,coocaaMId:"6uh9j6l00401",coocaaVId:"r9mtl000001",thirdMovieId:"o0032tld91n",thirdVideoId:"m441e3rjq8kwpsc",duration:315,frameDuration:315,formattedDuration:"00:05:15",videoTitle:"JX3",playUrl:i("d193"),cover:i("43f9"),modifyTime:"2020-12-19 04:53:07",source:"tencent",businessType:0,businessName:"影视",categoryId:2,categoryName:"动漫",startFrame:0,endFrame:315,startTime:0,endTime:315}];this.$store.commit("updateArrayRevalue",{name:"materialTabList",value:t})},mounted:function(){var t=this;window.addEventListener("keyup",this.keyUpMonitor),window.addEventListener("keydown",this.keyDownMonitor),window.addEventListener("mousedown",this.mouseDownMonitor),window.addEventListener("resize",this.windowResizeMonitor),this.$store.commit("initDragImage"),this.$nextTick((function(){t.windowResizeMonitor(),t.canvasVideo=t.$refs.canvasVideo,t.videoTarget=t.$refs.video,t.clipResource=t.$refs.clipResource.$el,t.clipResource.addEventListener("scroll",t.axisYScrollMonitor),t.videoTarget.addEventListener("timeupdate",t.videoTimeUpdateMonitor),t.videoTarget.addEventListener("play",t.drawCanvasVideo),t.videoTarget.addEventListener("pause",t.stopCanvasVideo),setTimeout((function(){t.isClipLoading=!1,t.startGuider()}),500)}))},beforeDestroy:function(){clearInterval(this.canvasTimer),this.canvasTimer=null,window.removeEventListener("keyup",this.keyUpMonitor),window.removeEventListener("keydown",this.keyDownMonitor),window.removeEventListener("mousedown",this.mouseDownMonitor),window.removeEventListener("resize",this.windowResizeMonitor),this.clipResource.removeEventListener("scroll",this.axisYScrollMonitor),this.videoTarget.removeEventListener("timeupdate",this.videoTimeUpdateMonitor),this.videoTarget.removeEventListener("play",this.drawCanvasVideo),this.videoTarget.removeEventListener("pause",this.stopCanvasVideo)}},De=Le,Pe=(i("4e3e"),i("f448"),Object(T["a"])(De,s,o,!1,null,"94a17ff6",null)),Ee=Pe.exports,Ne={name:"App",components:{OnlineClip:Ee}},Fe=Ne,Me=(i("034f"),Object(T["a"])(Fe,n,r,!1,null,null,null)),Oe=Me.exports,Be={lastestDownloadList:[],trackScale:10,defaultMaterialHeight:55,defaultPicWidth:100,defaultPicHeight:30,defaultTextHeight:28,defaultDrrHeight:70,list:null,vm:null,trackId:null,trackIndex:null,targetTrackIndex:null,playingName:null,tracksTime:{material:0,picture:0,text:0},timeAxisDuration:0,trackDuration:0,selected:{index:null,trackIndex:null,type:null,target:null,width:null,dataURL:null,duration:null},selectedTarget:{},playingMaterial:{},playingPicture:[],playingPictureIndex:[],playingText:[],playingTextIndex:[],playingTransition:{},pointerLeft:0,pointerDuration:0,materialTabList:[],materialTabNewList:[],materialFileList:[],materialFileLastLength:0,isCloseClip:!1,isMaterialUploading:!1,isEditMaterialUploading:!1,isPictureUploading:!1,materialTrackList:[],materialTrackWidth:500,pictureTrackList:[[]],textTrackList:[[]],transitionTrackList:[],operatingTransition:{},tracks:[{list:"pictureTrackList",playing:"playingPicture",drr:"pictureDrr"},{list:"textTrackList",playing:"playingText",drr:"textDrr"}],operationName:null,operationIndex:null,operationNewIndex:null,dragTranslateX:0,dragWidth:0,dragIndex:null,direction:null,dragImage:new Image,isDropZone:!1,isDragFromTab:!1,isDragging:!1,isDragDrop:!1,isConflic:!1,isTrackDrag:!1,dragPlayingName:null,picturePosition:{x:0,y:0},dragTarget:{},mouseElement:null,originalElement:null,textEditIndex:null,originalWidth:null,proportion:1,activeName:null,isPictureActive:!1,isTextActive:!1,tabResizedTarget:{width:0,height:0},isTrackResize:!1,needPointerJudge:{isNeed:!1,target:null}},Ve=Be,$e={},Ue=$e,Re=(i("cc71"),i("c5d0"),{getTracksDration:function(t,e){for(var i=0,a=0;a<t[e].length;a++){var n=t[e][a],r=n[n.length-1]?n[n.length-1].trackEndTime:0;r>i&&(i=r)}var s=e.slice(0,e.indexOf("Track"));this.commit("updateTracksDuration",{name:s,duration:i})},updateValue:function(t,e){t[e.name]=e.value},updateArrayAdd:function(t,e){isNaN(e.index)?t[e.name].push(e.value):t[e.name].splice(e.index,0,e.value)},updateArrayObjectAdd:function(t,e){t[e.name]=Object(c["a"])({},e.value)},updateArrayRevalue:function(t,e){t[e.name]=JSON.parse(JSON.stringify(e.value))},updateArrayDelete:function(t,e){t[e.name].splice(e.index,e.amount)},updateArrayObjectAttr:function(t,e){t[e.name][e.index][e.attr]=e.value},updateObjectAttribute:function(t,e){t[e.name][e.attr]=e.value},updateTracksDuration:function(t,e){t.tracksTime[e.name]=e.duration;var i=0;for(var a in t.tracksTime)t.tracksTime[a]>i&&(i=t.tracksTime[a]);t.timeAxisDuration=i},updatePointer:function(t,e){t.pointerLeft=e.pointerLeft,t.pointerDuration=e.pointerDuration},updatePlayingTarget:function(t,e){void 0===e.index?t[e.target]=e.value:(t[e.target]=e.value,t[e.target+"Index"]=e.index)},updateMateriaTime:function(t,e){var i=e.duration,a=e.index,n=e.operator?1:-1,r=t.materialTrackList[a].trackStartTime,s=t.materialTrackList[a].trackEndTime;t.materialTrackList[a].trackStartTime=1*(r+i*n).toFixed(1),t.materialTrackList[a].trackEndTime=1*(s+i*n).toFixed(1)},updateTransitionDuration:function(t,e){var i=t.operatingTransition;i.zoomTime=e,i.playbackRate=i.videoDuration?1*(i.videoDuration/e).toFixed(1):1,i.trackStartTime=Math.floor(i.originStartTime-e/2),i.trackEndTime=Math.floor(i.trackStartTime+e)},updateTransitionType:function(t,e){var i=t.operatingTransition;i.transitionName=e.transitionName,i.typeId=e.id,i.videoDuration=e.duration,i.playbackRate=1*(i.videoDuration/i.zoomTime).toFixed(1)},updateDrrResolution:function(t,e){t.proportion=e.width/t.originalWidth,t.tracks.forEach((function(i){for(var a=t[i.list],n=0;n<a.length;n++){a[n].forEach((function(t){"textTrackList"!==i.list&&(t.nowXAxis=e.proportion*t.nowXAxis,t.nowYAxis=e.proportion*t.nowYAxis,t.width=e.proportion*t.width,t.height=e.proportion*t.height)}));var r=t[i.playing][n],s=e.vm.$refs[i.drr][0].$refs.resizable;if(!r||!s)return!1;var o=s[0];o.left=r.nowXAxis,o.top=r.nowYAxis,o.width=r.width,o.height=r.height}}))},initProportion:function(t,e){t.originalWidth=e},initTransitionList:function(t){var e=this;t.materialTrackList.forEach((function(t,i,a){a[i+1]&&a[i].trackEndTime===a[i+1].trackStartTime&&e.commit("transitionAdd",i)}))},isTrackResizeInvert:function(t){t.isTrackResize=!t.isTrackResize},isNeedPointerJudging:function(t){t.needPointerJudge.isNeed=!1,t.needPointerJudge.target=null},initDragImage:function(t){t.dragImage.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="},initTrackListContainer:function(t,e){for(var i=0;i<e.list.length;i++){t.list=e.list[i],t.vm=e.vm;var a={data:e.data[i],videoFrame:e.videoFrame,videoInfo:e.videoInfo};this.commit("initTrackList",a),this.commit("getTracksDration",t.list)}this.dispatch("setAllTrackDraw",e)},initTrackList:function(t,e){if(!e.data)return!1;var i=JSON.parse(JSON.stringify(e.data)),a=[];"pictureTrackList"===t.list?a.push(i):a=i;for(var n=0;n<a.length;n++)a[n]&&(a[n].forEach((function(i){var a=i.zoom.split(":"),n=e.videoFrame.width/e.videoInfo.firstVideoH,r=e.videoFrame.height/e.videoInfo.firstVideoV;i.width=1*a[0],i.height=1*a[1],i.duration=i.endSecond-i.startSecond,i.range=i.duration*t.trackScale,i.realRange=i.duration*t.trackScale,i.trackStartTime=i.startSecond,i.trackEndTime=i.endSecond,i.positionXBegin=i.startSecond*t.trackScale,i.positionXEnd=i.endSecond*t.trackScale,i.nowXAxis=n*i.xAxis,i.nowYAxis=r*i.yAxis,i.scale=1,i.transparency=1*i.transparency,"pictureTrackList"===t.list&&(i.fileUrl=i.watermark,i.transparency=1*i.transparency,i.overturn?i.transform="vflip"===i.overturn?"rotateX(180deg)":"rotateY(180deg)":i.transform=""),"textTrackList"===t.list&&(i.fontWeight=i.bold?600:400,i.fontStyle=i.italic?"italic":"normal",i.border=i.frame?"solid 1px #FFFFFF":"none",i.textShadow=i.shadowY?"0px 1.5px #000000":"none",i.textDecoration=i.underLine?"underline":"none",i.webkitTextStroke=i.borderW?"1px #000000":"0px")})),0===n&&t[t.list].pop(),t[t.list].push(a[n]))},clearSelected:function(t){for(var e in t.selected)t.selected[e]=null;t.selectedTarget={}},clearPlaying:function(t,e){t[e.target][e.trackIndex]=void 0,t[e.target+"Index"][e.trackIndex]=-1},clearAll:function(t){t.materialTabList=[],t.materialTrackList=[],t.textTrackList=[[]],t.pictureTrackList=[[]],t.transitionTrackList=[],t.pointerLeft=0,t.pointerDuration=0,t.timeAxisDuration=0,t.tracksTime.material=0,t.tracksTime.picture=0,t.tracksTime.text=0,this.commit("clearSelected")},clearDragData:function(t){t.trackId=null},trackBlockSelect:function(t,e){t.selected.target&&(t.selected.target.style.boxShadow="");var i=e.e.target?e.e.target:e.e;t.selected.index=e.index,t.selected.trackIndex=isNaN(e.trackIndex)?null:e.trackIndex,t.selected.type=e.list,t.selected.target=i,t.selected.width=Math.round(i.getBoundingClientRect().width),t.selected.dataURL=i.style?i.style.backgroundImage:"",t.targetTrackIndex=t.selected.trackIndex,i.style.boxShadow="inset 0px 0px 2px 1px #26CB51";var a=e.realList?e.realList[e.index]:t[e.list][e.trackIndex][e.index];t.selectedTarget=a},trackBlockResize:function(t,e){t.list=e.list,t.vm=e.vm,t.prefix=e.prefix,t.trackId=e.prefix+"Track";var i=t.selected.index,a=t[e.list][t.selected.trackIndex][i],n=e.newWidth,r=t[e.list][t.selected.trackIndex][i+1],s=e.element.clientWidth,o="video"===a.fileType?a.range:-1,c=n;if(-1===o)a.positionXEnd=a.positionXBegin+n;else{var l=o>=n?n:o;a.positionXEnd=a.positionXBegin+l,c=l}if(a.realRange=1*(a.positionXEnd-a.positionXBegin).toFixed(1),e.element.style.width=c+"px",!r)return!0;var d=c-s;c>s&&d>r.positionXBegin-a.positionXEnd&&this.commit("trackBlockResizeMove",d)},trackBlockResizeMove:function(t,e){for(var i=t[t.list][t.selected.trackIndex],a=t.selected.index+1;a<i.length;a++)i[a].positionXBegin+=e,i[a].positionXEnd+=e;t.isTrackResize=!0,this.commit("trackDraw")},trackBlockDelete:function(t,e){t.vm=e.vm,t.list=t.selected.type,t.prefix=e.prefix,t.trackId=e.trackId;var i=t[t.selected.type][t.selected.trackIndex],a=t.selected.index;return!!i.length&&(i.splice(a,1),i.forEach((function(t,e){t.seq=e+1})),i.length?void this.dispatch("setNextTrackBlock"):(this.commit("clearSelected"),!0))},dragStart:function(t,e){var i=e.e,a=e.item,n=e.index;i.dataTransfer.setData("Text",n),i.dataTransfer.setDragImage(t.dragImage,0,0),t.isTrackDrag=e.isTrackDrag,t.prefix=e.prefix,t.list=e.list,t.trackId=e.trackId,t.dragTarget=a,t.isDropZone=!1,t.isDragDrop=!1,t.isDragging=!0;var r=i.target.getBoundingClientRect();if(t.isTrackDrag){t.originalElement=i.target,t.picturePosition.y=r.top,t.isDragFromTab=!1,t.trackIndex=e.trackIndex,t.dragIndex=n;var s="playing"+t.prefix.slice(0,1).toUpperCase()+t.prefix.slice(1);t[s][t.trackIndex]&&t[s][t.trackIndex].seq===n+1&&(t.dragPlayingName=t.prefix)}else t.isDragFromTab=!0,t.trackIndex=null,t.dragIndex=null;t.mouseElement=document.createElement("DIV"),t.dragTranslateX=r.left,a.duration?t.dragWidth=a.realRange?a.realRange:a.duration*t.trackScale:t.dragWidth=t.defaultPicWidth;var o="\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      z-index: 9999;\n      pointer-events: none;\n      background-size: auto 100%;\n      border-radius: 5px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      width: ".concat(t.dragWidth,"px;\n      transform: translate(").concat(r.left,"px, ").concat(r.top,"px);\n    ");"picture"===t.prefix&&(o+="\n        height: ".concat(t.defaultPicHeight,"px;\n        background-image: url(").concat(a.picUrl,");\n        background-color: #000000;\n      ")),"text"===t.prefix&&(o+="\n        font-size: 13px;\n        height: ".concat(t.defaultTextHeight,"px;\n        line-height: ").concat(t.defaultTextHeight,"px;\n        background-color: #F2F2F2;\n        text-align: center;\n        box-shadow: inset 0px 0px 2px 1px #26CB51;\n        color: #333333;\n      "),t.mouseElement.innerText=a.text),t.mouseElement.style=o,document.body.appendChild(t.mouseElement)},tabDragging:function(t,e){e.preventDefault();var i=e.clientX;t.direction=i-t.dragTranslateX,t.dragTranslateX=i,t.isDropZone||(t.mouseElement.style.transform="translate("+i+"px,"+e.clientY+"px)")},trackDragging:function(t,e){var i=e.clientX;t.direction=i-t.dragTranslateX,t.dragTranslateX=i,t.originalElement.style.visibility="hidden"},dragTrackEnter:function(t,e){if(e.target.className!==t.trackId)return!1;var i=e.target.id.indexOf("Track");t.targetTrackIndex=1*e.target.id.slice(i+5);var a=t.mouseElement;a.style.boxShadow="inset 0px 0px 2px 1px #26CB51"},dragTrackOver:function(t,e){if(e.e.target.className!==t.trackId)return!1;e.e.preventDefault(),t.vm=e.vm,t.isDropZone=!0,this.commit("draggingMove")},draggingMove:function(t){var e=document.getElementById(t.trackId+t.targetTrackIndex),i=e.getBoundingClientRect(),a=i.left,n=t.dragWidth,r=t.mouseElement,s=t.dragTranslateX,o=1*(s-a).toFixed(1),c=1*(o+n).toFixed(1),l=t[t.list][t.targetTrackIndex];t.iconWidth=a,t.picturePosition.y=i.top;var d=null,u=null,h=null,m=null,p=null,g=null,f=!1,v=l.findIndex((function(e,i){var a=c>=e.positionXBegin&&c<=e.positionXEnd,n=o>=e.positionXBegin&&o<=e.positionXEnd,r=e.positionXBegin>=o&&e.positionXBegin<=c,s=e.positionXEnd>=o&&e.positionXEnd<=c,l=t.targetTrackIndex===t.trackIndex?i!==t.dragIndex:1;return l&&(a||n||r||s)}));if(-1!==v)if(d=l[v],t.direction>=0?(u=t.targetTrackIndex===t.trackIndex&&v+1!==t.dragIndex||t.targetTrackIndex!==t.trackIndex?l[v+1]:l[v+2],f=o>=d.positionXBegin+d.realRange/2):(u=t.targetTrackIndex===t.trackIndex&&v-1!==t.dragIndex||t.targetTrackIndex!==t.trackIndex?l[v-1]:l[v-2],f=o<=d.positionXBegin+d.realRange/2),0===t.direction&&(f=!0),t.isDragFromTab&&!f&&(r.style.transform="translate("+s+"px,"+t.picturePosition.y+"px)"),u){if(h=t.direction>=0?u.positionXBegin-d.positionXEnd:d.positionXBegin-u.positionXEnd,h<5)return!0;if(m=h-n,t.direction>0&&f)return p=m>0?n:h,g=d.positionXEnd+a,t.dragWidth=p,r.style.width=p+"px",r.style.transform="translate("+g+"px,"+t.picturePosition.y+"px)",!0;if(t.direction<0&&f)return p=m>0?n:h,g=d.positionXBegin-p+a,t.dragWidth=p,r.style.width=p+"px",r.style.transform="translate("+g+"px,"+t.picturePosition.y+"px)",!0}else{if(t.direction>0&&f)return g=d.positionXEnd+a,r.style.transform="translate("+g+"px,"+t.picturePosition.y+"px)",!0;if(t.direction<0&&f)return d.positionXBegin<5||(m=d.positionXBegin-n,p=m>0?n:d.positionXBegin,g=d.positionXBegin-p+a,t.dragWidth=p,r.style.width=p+"px",r.style.transform="translate("+g+"px,"+t.picturePosition.y+"px)"),!0}-1===v&&(r.style.transform="translate("+s+"px,"+t.picturePosition.y+"px)")},drop:function(t,e){e.preventDefault(),t.isDropZone=!1,t.isDragDrop=!0,t.isDragging=!1;var i=Object.assign({},t.dragTarget),a=t.mouseElement.getBoundingClientRect();if(i.positionXBegin=a.left-t.iconWidth<=.8?0:a.left-t.iconWidth,i.positionXEnd=i.positionXBegin+a.width,t.isDragFromTab&&(t.isDragFromTab=!1),this.commit("judgeConflicBlock",i),t.isConflic)return t.vm.$message({type:"warning",message:"该区域空位长度不够，不支持直接放置"}),document.body.removeChild(t.mouseElement),t.originalElement.style.visibility="visible",t.mouseElement=null,!0;t.needPointerJudge.isNeed=!0,t.needPointerJudge.target=t.list,t.isTrackDrag?(t.originalElement.style.visibility="visible",t.isTrackDrag=!1,t.dragPlayingName=null,this.commit("trackDragRealEnd",{target:i,index:e.dataTransfer.getData("Text")})):(t.dragTarget={},this.commit("tabDragAdd",{target:i,index:void 0}))},tabDragAdd:function(t,e){for(var i in e.iconAdd&&(t.trackIndex=null),e)t[i]=e[i];var a=e.target;a.duration||(a.duration=t.defaultPicWidth/t.trackScale),a.range=1*(a.duration*t.trackScale).toFixed(1),a.realRange=a.range,a.width=t.defaultPicWidth,a.nowXAxis=0,a.nowYAxis=0,a.whirl=0,a.scale=1,a.transparency=1,"pictureTrackList"===t.list&&(a.overturn=""),t.tempDragTarget=a,"pictureTrackList"===t.list?this.dispatch("getWidthAndHeight",e.index):this.commit("tabDragRealAdd",{wnh:{width:t.defaultPicWidth,height:t.defaultDrrHeight},index:e.index})},tabDragRealAdd:function(t,e){t.tempDragTarget.height=t.tempDragTarget.width/e.wnh.width*e.wnh.height,t.tempDragTarget.zoom=t.tempDragTarget.width+":"+t.tempDragTarget.height,isNaN(e.index)?(t[t.list][t.targetTrackIndex].push(t.tempDragTarget),this.commit("listSort")):(t[t.list][t.targetTrackIndex].splice(e.index+1,0,t.tempDragTarget),this.commit("listMove",{target:t.tempDragTarget,index:e.index+1}))},listSort:function(t){t[t.list][t.targetTrackIndex].sort((function(t,e){return t.positionXBegin-e.positionXBegin})),this.commit("getList")},getList:function(t){null!==t.trackIndex&&t.targetTrackIndex!==t.trackIndex?(this.commit("formatList",t.targetTrackIndex),this.commit("formatList",t.trackIndex),this.commit("getTracksDration",t.list),this.dispatch("setTrackDraw",{way:!0,clear:!0})):(this.commit("formatList",t.targetTrackIndex),this.commit("getTracksDration",t.list),this.dispatch("setTrackDraw",{way:!1,clear:!0}))},formatList:function(t,e){var i=t.trackScale;t[t.list][e].forEach((function(t,e){t.positionXBegin=1*t.positionXBegin.toFixed(1),t.positionXEnd=1*t.positionXEnd.toFixed(1),t.realRange=1*(t.positionXEnd-t.positionXBegin).toFixed(1),t.trackStartTime=1*(t.positionXBegin/i).toFixed(1),t.trackEndTime=1*(t.positionXEnd/i).toFixed(1),t.startSecond=t.trackStartTime,t.endSecond=t.trackEndTime,t.seq=e+1}))},listMove:function(t,e){var i=e.index,a=t[t.list][t.targetTrackIndex],n=a.length,r=e.target.realRange,s=a[i].positionXBegin,o=a[i].positionXEnd,c=a[i+1]?a[i+1].positionXBegin:void 0,l=c-s;if(!c||c>=o)return this.commit("getList"),!0;if(l>=5)return a[i].positionXEnd=c,this.commit("getList"),!0;for(var d=i+1;d<n;d++)a[d].positionXBegin+=r,a[d].positionXEnd+=r;this.commit("getList")},judgeConflicBlock:function(t,e){var i=1*e.positionXBegin.toFixed(1),a=1*e.positionXEnd.toFixed(1),n=t[t.list][t.targetTrackIndex].findIndex((function(e,n){var r=t.targetTrackIndex!==t.trackIndex||t.dragIndex!==n;return r&&(i>e.positionXBegin&&i<e.positionXEnd||a>e.positionXBegin&&a<e.positionXEnd)})),r=t[t.list][t.targetTrackIndex].findIndex((function(e,n){var r=t.targetTrackIndex!==t.trackIndex||t.dragIndex!==n;return r&&i<e.positionXBegin&&a>e.positionXEnd}));t.isConflic=-1!==n||-1!==r},tabDragEnd:function(t,e){t.isDropZone&&this.commit("drop",e),t.mouseElement&&(document.body.removeChild(t.mouseElement),t.mouseElement=null)},trackDragEnd:function(t){if(t.isDragging=!1,t.isDropZone=!1,t.isDragDrop)return!0;var e=Object.assign({},t.dragTarget),i=t.mouseElement.getBoundingClientRect();e.positionXBegin=i.left-t.iconWidth<=.8?0:i.left-t.iconWidth,e.positionXEnd=e.positionXBegin+i.width,t.pointerLeft>=e.positionXBegin&&t.pointerLeft<=e.positionXEnd&&(t.needPointerJudge.isNeed=!0,t.needPointerJudge.target=t.list),this.commit("trackDragRealEnd",{target:e,index:t.dragIndex}),t.isTrackDrag=!1,t.dragPlayingName=null,t.originalElement.style.visibility="visible"},trackDragRealEnd:function(t,e){var i=e.target,a=1*e.index,n=t[t.list][t.trackIndex];t.mouseElement&&document.body.removeChild(t.mouseElement),n[a].positionXBegin=i.positionXBegin,n[a].positionXEnd=i.positionXEnd,n[a].isSelected=!0,t.targetTrackIndex!==t.trackIndex&&(t[t.list][t.targetTrackIndex].push(n[a]),t[t.list][t.trackIndex].splice(a,1)),t.dragTranslateX=null,t.dragWidth=null,t.mouseElement=null,t.dragIndex=null,this.commit("listSort")},trackDraw:function(t,e){isNaN(e)||(t.targetTrackIndex=e);for(var i=t[t.list][t.targetTrackIndex],a=0;a<i.length;a++){var n=t.prefix+a,r=i[a],s=null;if(s="onlineClip"===t.vm.$el.id?t.vm.$refs[t.trackId][t.targetTrackIndex].$refs[n][0]:document.querySelector("#"+t.trackId+t.targetTrackIndex).querySelector("#"+n),t.isTrackDrag||t.isTrackResize)s.style.transform="translateX("+r.positionXBegin+"px)";else{var o="\n          width: ".concat(r.realRange,"px;\n          background-size: auto 100%;\n          transform: translateX(").concat(r.positionXBegin,"px);\n        ");"picture"===t.prefix&&(o+="\n            height: ".concat(t.defaultPicHeight,"px;\n            background-image: url(").concat(r.picUrl,");\n            background-color: #000000;\n          ")),"text"===t.prefix&&(o+="\n            background: #F2F2F2;\n            height: ".concat(t.defaultTextHeight,"px;\n          ")),s.style=o}}},trackAdd:function(t,e){t[e.name+"TrackList"].splice(e.index+1,0,[]),this.commit("trackAfter",e)},trackDelete:function(t,e){t[e.name+"TrackList"].splice(e.index,1),this.commit("trackAfter",e)},trackCopy:function(t,e){var i=JSON.parse(JSON.stringify(t[e.name+"TrackList"][e.index]));t[e.name+"TrackList"].splice(e.index+1,0,i),this.commit("trackAfter",e)},trackAfter:function(t,e){t.list=e.list,t.targetTrackIndex=e.index,t.vm=e.vm,t.prefix=e.name,t.trackId=e.name+"Track",t.needPointerJudge.isNeed=!0,t.needPointerJudge.target=t.list,this.dispatch("setTrackDraw",{way:!0,clear:!0})},drrActive:function(t,e){t.activeName=e.activeTarget,t.list=e.list,t.playingName=e.playingName,t.vm=e.vm},drrDragStop:function(t,e){var i=e.vm.$refs.resizable[0],a=t.selectedTarget;t.vm=e.vm,t.playingName=e.playingName,a.nowXAxis=e.left,a.nowYAxis=e.top,a.width=i.width,a.height=i.height},drrResizing:function(t,e){var i=e.rect,a=e.vm.$refs.resizable[0];if(t.vm=e.vm,t.playingName=e.playingName,16===e.keyCode){var n=t.selectedTarget,r=i.width-n.width,s=i.height-n.height;return i.left===n.nowXAxis&&i.top===n.nowYAxis||(a.left=n.nowXAxis,a.elmX=n.nowXAxis,a.top=n.nowYAxis,a.elmY=n.nowYAxis),r>s?(a.height=i.width/n.width*n.height,a.elmH=i.width/n.width*n.height):(a.width=i.height/n.height*n.width,a.elmW=i.height/n.height*n.width),!0}a.elmW=i.width,a.elmH=i.height},drrResizeStop:function(t,e){var i=t.selectedTarget;i.nowXAxis=e.left,i.nowYAxis=e.top,i.width=e.width,i.height=e.height,i.zoom=e.width+":"+e.height,this.commit("drrElementData",{way:!0,index:t.selected.trackIndex})},drrRotating:function(t,e){t.selectedTarget.whirl=e,t[t.list][t.selected.trackIndex][t.selectedTarget.seq-1].whirl=e},drrTextChange:function(t,e){t.textTrackList[e.trackIndex][t.textEditIndex].text=e.text},drrElementData:function(t,e){if(e.way||(t.vm=e.vm,t.playingName=e.playingName),!e.isSubmit&&!t[t.playingName][e.index]||!t.vm.$refs.resizable||!t.vm.$refs.drrTarget)return!1;var i=t.vm.$refs.resizable[0],a=t.vm.$refs.drrTarget[0],n=e.isSubmit?e.target:t[t.playingName][e.index];if(!i||!a)return!1;var r=e.isSubmit?n.width*e.scale.widthScale:n.width,s=e.isSubmit?n.height*e.scale.heightScale:n.height,o=e.isSubmit?n.nowXAxis*e.scale.widthScale:n.nowXAxis,c=e.isSubmit?n.nowYAxis*e.scale.heightScale:n.nowYAxis;i.elmW=r,i.elmH=s,i.width=r,i.height=s,i.rotateAngle=n.whirl,i.elmX=o,i.elmY=c,i.left=o,i.top=c;var l=a.$el?a.$el.style:a.style;l.transform=n.transform,l.opacity=n.transparency},drrTabRotate:function(t,e){var i=t.vm.$refs.resizable[0],a=t.selectedTarget,n=t[t.list][t.selected.trackIndex][t.selectedTarget.seq-1];i.rotateAngle=e,a.whirl=e,n.whirl=e},drrTabBeforeResize:function(t,e){var i=t.vm.$refs.resizable[0],a=i.width,n=i.height;0!==e&&(t.tabResizedTarget.width=a/e,t.tabResizedTarget.height=n/e)},drrTabResize:function(t,e){var i=t.selectedTarget;i.width=t.tabResizedTarget.width*e===0?1:t.tabResizedTarget.width*e,i.height=t.tabResizedTarget.height*e===0?1:t.tabResizedTarget.width*e,i.scale=e,i.zoom=i.width+":"+i.height,this.commit("drrElementData",{way:!0,index:t.selected.trackIndex})},drrTabOpacity:function(t,e){var i=t.vm.$refs.drrTarget?t.vm.$refs.drrTarget[0]:null;if(!i)return!1;var a=i.$el?i.$el.style:i.style;a.opacity=e;var n=t.selectedTarget;n.transparency=e},drrTabFlip:function(t,e){var i=t.vm.$refs.drrTarget?t.vm.$refs.drrTarget[0]:null;if(!i)return!1;var a=i.$el?i.$el.style:i.style,n="rotate"+e+"(180deg)",r="rotate"+e+"(0deg)",s=a.transform;if(!s)return a.transform=n,this.commit("drrTabFlipEnd",{transform:n,way:e}),!0;var o=s.indexOf(e);if(-1===o)return a.transform+=n,this.commit("drrTabFlipEnd",{transform:a.transform,way:e}),!0;var c=s.indexOf(n);a.transform=-1!==c?s.replace(n,r):s.replace(r,n),this.commit("drrTabFlipEnd",{transform:a.transform,way:e})},drrTabFlipEnd:function(t,e){var i=t.selectedTarget;i.transform=e.transform,-1===e.transform.indexOf("180")?i.overturn="":i.overturn="X"===e.way?"vflip":"hflip"},drrTabFontOperation:function(t,e){var i=document.querySelector("#textDrr"+t.selected.trackIndex).querySelector(".drr-target");if(i){var a=i.style;a[e.styleName]=e.isNeedPx?e.styleValue+"px":e.styleValue,t.textTrackList[t.selected.trackIndex][t.selected.index][e.styleName]=e.styleValue}},drrTabFontStyle:function(t,e){var i=document.querySelector("#textDrr"+t.selected.trackIndex).querySelector(".drr-target");if(i){var a=i.style;a[e.styleName]=e.styleValue,e.isOnly||(t.textTrackList[t.selected.trackIndex][t.selected.index][e.styleName]=e.styleValue),t.textTrackList[t.selected.trackIndex][t.selected.index][e.name]=e.value}},getTransitionMaxDuration:function(t,e){var i=t.materialTrackList[e.indexOne].trackEndTime-t.materialTrackList[e.indexOne].trackStartTime,a=t.materialTrackList[e.indexTwo].trackEndTime-t.materialTrackList[e.indexTwo].trackStartTime,n=i<a?i:a;return n},materialClip:function(t){var e=t.operationIndex,i=t.transitionTrackList[e-1],a=t.transitionTrackList[e],n=this.commit("getTransitionMaxDuration",{indexOne:e-1,indexTwo:e}),r=this.commit("getTransitionMaxDuration",{indexOne:e+1,indexTwo:e+2}),s=i.zoomTime>n/2?n/2:i.zoomTime,o=a.zoomTime>r/2?r/2:a.zoomTime;i.zoomTime=Math.floor(s),i.maxDuration=Math.floor(n),a.zoomTime=Math.floor(o),a.maxDuration=Math.floor(r),this.commit("transitionAdd",e)},materialAdd:function(t){t.transitionTrackList.splice(t.operationIndex-1,1),this.commit("transitionAdd",t.operationIndex-1),this.commit("transitionAdd",t.operationIndex)},materialDelete:function(t){t.transitionTrackList.splice(t.operationIndex,2),this.commit("transitionAdd",t.operationIndex)},materialSort:function(){this.commit("materialDelete"),this.commit("materialAdd")},transitionAdd:function(t,e){var i=t.materialTrackList[e],a=t.materialTrackList[e+1];if(!i||!a)return!1;var n=t.materialTrackList[e].trackEndTime,r=t.materialTrackList[e].trackEndTime-t.materialTrackList[e].trackStartTime,s=t.materialTrackList[e+1].trackEndTime-t.materialTrackList[e+1].trackStartTime,o=s<r?s:r,c=o/2>1?1:o/2,l={trackStartTime:n-c/2,trackEndTime:n-c/2+1,originStartTime:n,maxDuration:Math.floor(o),typeId:7,playbackRate:1,zoomTime:Math.floor(c),transitionName:"",position:e,beforeTime:Math.floor(r),afterTime:Math.floor(s)};t.transitionTrackList.splice(e-1,0,l)}}),ze=Re,je=i("1da1"),Xe=(i("96cf"),{getWidthAndHeight:function(t,e){var i={},a=new Image;a.src=t.state.tempDragTarget.picUrl;var n=setInterval((function(){i.width&&(clearInterval(n),t.commit("tabDragRealAdd",{wnh:i,index:e})),i.width=a.width,i.height=a.height}),40)},setTrackDraw:function(t,e){t.state.vm.$nextTick((function(){var i=t.state;if(e.way)for(var a=0;a<i[i.list].length;a++)t.commit("trackDraw",a);else t.commit("trackDraw");e.clear&&t.commit("clearDragData")}))},setAllTrackDraw:function(t,e){var i=e.list,a=e.prefix;t.state.vm.$nextTick((function(){for(var e=t.state,n=0;n<i.length;n++){var r=e[i[n]];e.trackId=a[n]+"Track",e.prefix=a[n],e.list=i[n];for(var s=0;s<r.length;s++)t.commit("trackDraw",s)}t.commit("clearDragData")}))},setTrackBlockSelect:function(t,e){e.vm.$nextTick((function(){t.commit("trackBlockSelect",e)}))},setNextTrackBlock:function(t){var e=this;return Object(je["a"])(regeneratorRuntime.mark((function i(){var a,n,r,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.dispatch("setTrackDraw",{way:!1,clear:!1});case 2:a=t.state,n=a.selected.index,r=n>0?n-1:n,s=a.vm.$refs[a.trackId][a.selected.trackIndex].$refs[a.prefix+r][0],e.commit("trackBlockSelect",{e:s,index:r,trackIndex:a.selected.trackIndex,list:a.selected.type,vm:a.vm}),a.needPointerJudge.isNeed=!0,a.needPointerJudge.target=a.list,t.commit("clearDragData");case 10:case"end":return i.stop()}}),i)})))()}}),We=Xe;a["default"].use(g["a"]);var Qe=new g["a"].Store({state:Ve,getters:Ue,mutations:ze,actions:We}),Ye=(i("4c4f"),i("3394"),i("86d7"),i("8aa1"),i("c24c")),_e=i.n(Ye),Je=(i("01d7"),i("5c96")),He=i.n(Je);i("0fae");a["default"].use(He.a),a["default"].prototype.$driver=new _e.a({className:"scoped-class",opacity:.75,padding:10,nextBtnText:"下一步",prevBtnText:"上一步",doneBtnText:"结束",closeBtnText:"关闭",stageBackground:"#f7fff9",animate:!0,allowClose:!1,keyboardControl:!0,onNext:function(){}}),a["default"].config.productionTip=!1,new a["default"]({store:Qe,render:function(t){return t(Oe)}}).$mount("#app")},"5e07":function(t,e,i){"use strict";i("fac5")},"5f66":function(t,e,i){"use strict";i("ea85")},"605b":function(t,e,i){"use strict";i("dc60")},6597:function(t,e,i){},"719b":function(t,e,i){},"7aa1":function(t,e,i){},"82b3":function(t,e,i){"use strict";i("4e74")},"85ec":function(t,e,i){},"86d7":function(t,e,i){},"87b9":function(t,e,i){},"88ae":function(t,e){t.exports="data:image/png;base64,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"},"8aa1":function(t,e,i){},"9e3f":function(t,e,i){t.exports=i.p+"img/forest.929fc2a1.jpg"},a182:function(t,e,i){"use strict";i("3856")},c168:function(t,e,i){},c513:function(t,e,i){},ca6b:function(t,e,i){},d193:function(t,e,i){t.exports=i.p+"media/JX3.b7226285.mp4"},d374:function(t,e,i){},dc60:function(t,e,i){},dd7b:function(t,e,i){"use strict";i("debd")},debd:function(t,e,i){},df84:function(t,e){t.exports="data:image/png;base64,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"},e1df:function(t,e,i){t.exports=i.p+"img/circle.37198aa6.jpg"},ea0a:function(t,e,i){},ea85:function(t,e,i){},ef79:function(t,e,i){"use strict";i("d374")},f090:function(t,e,i){"use strict";i("c168")},f285:function(t,e,i){"use strict";i("4671")},f448:function(t,e,i){"use strict";i("719b")},f5f1:function(t,e,i){t.exports=i.p+"media/firework.1f1ecc1e.mp4"},f90d:function(t,e,i){"use strict";i("32c2")},fac5:function(t,e,i){},fd2e:function(t,e,i){"use strict";i("6597")}});
//# sourceMappingURL=app.15b4bd48.js.map